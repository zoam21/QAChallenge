!function(){function initTestCafeClientDrivers(window,isIFrameWithoutSrc){var document=window.document;!function(l){"use strict";var f,h,o,m,p,i={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return m=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},p=function(e,t,r){var n,o;if("function"==typeof e[t+r])return t+r;for(n=0;o=i[r][n];++n)if("function"==typeof e[t+o])return t+o;return null},f=function(e,t,r,n,o,i){var a,s,l,u,c,d;for("."!==(a=(r=r.split(/[\\/]/)).pop())&&".."!==a||(r.push(a),a="");null!=(s=r.shift());)if(s&&"."!==s&&(".."===s?(e=t.pop(),i=i.slice(0,i.lastIndexOf("/"))):(t.push(e),e=e[s],i+="/"+s),!e))throw m(n);if(a&&"function"!=typeof e[a]&&((d=(d=(d=(d=p(e,a,".js"))||p(e,a,".json"))||p(e,a,".css"))||p(e,a,".html"))?a=d:2!==o&&"object"==typeof e[a]&&(t.push(e),e=e[a],i+="/"+a,a="")),!a)return 1!==o&&e[":mainpath:"]?f(e,t,e[":mainpath:"],n,1,i):f(e,t,"index",n,2,i);if(!(c=e[a]))throw m(n);return c.hasOwnProperty("module")?c.module.exports:(l={},c.module=u={exports:l,id:i+"/"+a},c.call(l,l,u,h(e,t,i)),u.exports)},o=function(e,t,r,n){var o,i=r,a=r.charAt(0),s=0;if("/"===a){if(i=i.slice(1),!(e=l["/"])){if(u)return u(r);throw m(r)}n="/",t=[]}else if("."!==a){if(o=i.split("/",1)[0],!(e=l[o])){if(u)return u(r);throw m(r)}n=o,t=[],(i=i.slice(o.length+1))||(s=(i=e[":mainpath:"])?1:(i="index",2))}return f(e,t,i,r,s,n)},(h=function(t,r,n){return function(e){return o(t,[].concat(r),e,n)}})(l,[],"")}({replicator:{":mainpath:":"index.js","index.js":function(O,P,Q){function _(e,t){this.references=e,this.transforms=t,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}var R="@t",T=/^#*@(t|r)$/,U=eval("this"),V="function"==typeof ArrayBuffer,W="function"==typeof Map,X="function"==typeof Set,Y=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],Z=Array.prototype.slice,$={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}};_._createRefMark=function(e){var t=Object.create(null);return t["@r"]=e,t},_.prototype._createCircularCandidate=function(e,t,r){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:r,refIdx:-1})},_.prototype._applyTransform=function(e,t,r,n){var o=Object.create(null),i=n.toSerializable(e);return"object"==typeof i&&this._createCircularCandidate(e,t,r),o[R]=n.type,o.data=this._handleValue(i,t,r),o},_.prototype._handleArray=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=this._handleValue(e[r],t,r);return t},_.prototype._handlePlainObject=function(r){var n=this,o=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(e){var t=T.test(e)?"#"+e:e;o[t]=n._handleValue(r[e],o,t)}),o},_.prototype._handleObject=function(e,t,r){return this._createCircularCandidate(e,t,r),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},_.prototype._ensureCircularReference=function(e){var t=this.circularCandidates.indexOf(e);if(-1<t){var r=this.circularCandidatesDescrs[t];return-1===r.refIdx&&(r.refIdx=r.parent?++this.circularRefCount:0),_._createRefMark(r.refIdx)}return null},_.prototype._handleValue=function(e,t,r){var n=typeof e,o="object"==n&&null!==e;if(o){var i=this._ensureCircularReference(e);if(i)return i}for(var a=0;a<this.transforms.length;a++){var s=this.transforms[a];if(s.shouldTransform(n,e))return this._applyTransform(e,t,r,s)}return o?this._handleObject(e,t,r):e},_.prototype.transform=function(){for(var e=[this._handleValue(this.references,null,null)],t=0;t<this.circularCandidatesDescrs.length;t++){var r=this.circularCandidatesDescrs[t];0<r.refIdx&&(e[r.refIdx]=r.parent[r.key],r.parent[r.key]=_._createRefMark(r.refIdx))}return e};function aa(e,t){this.references=e,this.transformMap=t,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)}aa.prototype._handlePlainObject=function(t){var r=this,n=Object.create(null),e=Object.getOwnPropertyNames(t);for(var o in e.forEach(function(e){r._handleValue(t[e],t,e),T.test(e)&&(n[e.substring(1)]=t[e],delete t[e])}),n)t[o]=n[o]},aa.prototype._handleTransformedObject=function(e,t,r){var n=e[R],o=this.transformMap[n];if(!o)throw new Error("Can't find transform for \""+n+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[r]=o.fromSerializable(e.data)},aa.prototype._handleCircularSelfRefDuringTransform=function(e,t,r){var n=this.references,o=void 0;Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function(){return void 0===o&&(o=n[e]),o},set:function(e){return o=e}})},aa.prototype._handleCircularRef=function(e,t,r){-1<this.activeTransformsStack.indexOf(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,r):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[r]=this.references[e])},aa.prototype._handleValue=function(e,t,r){if("object"==typeof e&&null!==e){var n=e["@r"];if(void 0!==n)this._handleCircularRef(n,t,r);else if(e[R])this._handleTransformedObject(e,t,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)this._handleValue(e[o],e,o);else this._handlePlainObject(e)}},aa.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var ba=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){return{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=new(U[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",shouldTransform:function(e,t){return V&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return Z.call(t)},fromSerializable:function(e){if(V){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){for(var r=0;r<Y.length;r++){var n=Y[r];if("function"==typeof U[n]&&t instanceof U[n])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:Z.call(e)}},fromSerializable:function(e){return"function"==typeof U[e.ctorName]?new U[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",shouldTransform:function(e,t){return W&&t instanceof Map},toSerializable:function(e){var r=[];return e.forEach(function(e,t){r.push(t),r.push(e)}),r},fromSerializable:function(e){if(W){for(var t=new Map,r=0;r<e.length;r+=2)t.set(e[r],e[r+1]);return t}for(var n=[],o=0;o<e.length;o+=2)n.push([e[r],e[r+1]]);return n}},{type:"[[Set]]",shouldTransform:function(e,t){return X&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},fromSerializable:function(e){if(X){for(var t=new Set,r=0;r<e.length;r++)t.add(e[r]);return t}return e}}],ca=P.exports=function(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||$,this.addTransforms(ba)};ca.prototype.addTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var r=e[t];if(this.transformsMap[r.type])throw new Error('Transform with type "'+r.type+'" was already added.');this.transforms.push(r),this.transformsMap[r.type]=r}return this},ca.prototype.removeTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var r=e[t],n=this.transforms.indexOf(r);-1<n&&this.transforms.splice(n,1),delete this.transformsMap[r.type]}return this},ca.prototype.encode=function(e){var t=new _(e,this.transforms).transform();return this.serializer.serialize(t)},ca.prototype.decode=function(e){var t=this.serializer.deserialize(e);return new aa(t,this.transformsMap).transform()}}},"testcafe-release":{src:{client:{automation:{"cursor.js":function(e,t,r){e.__esModule=!0;var n=i(r("./deps/testcafe-core")),o=i(r("./deps/testcafe-ui"));function i(e){return e&&e.__esModule?e:{default:e}}var a=n.default.domUtils,s=window.top===window?o.default.cursorUI:o.default.iframeCursorUI;e.default={x:-1,y:-1,currentActiveWindow:window.top,_ensureActiveWindow:function(){if(this.currentActiveWindow!==window&&this.currentActiveWindow!==window.parent){var e=a.findIframeByWindow(this.currentActiveWindow);e&&a.isElementInDocument(e)||(this.currentActiveWindow=window)}},get active(){return this._ensureActiveWindow(),this.currentActiveWindow===window},set activeWindow(e){this.currentActiveWindow=e},get activeWindow(){return this._ensureActiveWindow(),this.currentActiveWindow},get position(){return{x:this.x,y:this.y}},get visible(){return window.top===window&&s.isVisible()},move:function(e,t){return this.x=e,this.y=t,s.move(this.x,this.y)},hide:function(){this.visible&&s.hide()},show:function(){window.top===window&&s.show()},leftButtonDown:function(){return s.leftButtonDown()},rightButtonDown:function(){return s.rightButtonDown()},buttonUp:function(){return s.buttonUp()}},t.exports=e.default},deps:{"testcafe-core.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeUI%"],t.exports=e.default}}},driver:{"command-executors":{"browser-manipulation":{"ensure-crop-options.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t){var r=e.getBoundingClientRect(),n={left:r.left,right:r.right,top:r.top,bottom:r.bottom},o=_.styleUtils.getElementMargin(e),i=_.styleUtils.getElementPadding(e),a=_.styleUtils.getBordersWidth(e);t.originOffset={x:0,y:0};var s=n.left+e.scrollWidth+a.left+a.right,l=n.top+e.scrollHeight+a.top+a.bottom;n.right=Math.max(n.right,s),n.bottom=Math.max(n.bottom,l),t.includeBorders&&t.includePaddings?t.includeMargins&&(t.originOffset.x-=o.left,t.originOffset.y-=o.top,n.left-=o.left,n.top-=o.top,n.right+=o.right,n.bottom+=o.bottom):(t.originOffset.x+=a.left,t.originOffset.y+=a.top,n.left+=a.left,n.top+=a.top,n.right-=a.right,n.bottom-=a.bottom,t.includePaddings||(t.originOffset.x+=i.left,t.originOffset.y+=i.top,n.left+=i.left,n.top+=i.top,n.right-=i.right,n.bottom-=i.bottom));n.width=n.right-n.left,n.height=n.bottom-n.top;var u=S({min:t.crop.left,max:t.crop.right,length:t.crop.width},n.width),c=S({min:t.crop.top,max:t.crop.bottom,length:t.crop.height},n.height);if(t.crop.left=u.min,t.crop.right=u.max,t.crop.width=u.length,t.crop.top=c.min,t.crop.bottom=c.max,t.crop.height=c.length,t.crop.width<=0||t.crop.height<=0)throw new y.InvalidElementScreenshotDimensionsError(t.crop.width,t.crop.height);var d=_.styleUtils.getViewportDimensions();(n.width>d.width||n.height>d.height)&&(t.scrollToCenter=!0);var f="number"==typeof t.scrollTargetX,h="number"==typeof t.scrollTargetY;f||(t.scrollTargetX=I(t.crop.left,t.crop.right,d.width));h||(t.scrollTargetY=I(t.crop.top,t.crop.bottom,d.height));var m=(0,w.getOffsetOptions)(e,t.scrollTargetX,t.scrollTargetY),p=m.offsetX,E=m.offsetY;t.scrollTargetX=p,t.scrollTargetY=E;var g=!f||t.scrollTargetX>=t.crop.left&&t.scrollTargetX<=t.crop.right,v=!h||t.scrollTargetY>=t.crop.top&&t.scrollTargetY<=t.crop.bottom;if(!g||!v)throw new y.ActionInvalidScrollTargetError(g,v)};var n,_=r("../../deps/testcafe-core"),w=r("../../deps/testcafe-automation"),o=r("../../../../utils/limit-number"),i=(n=o)&&n.__esModule?n:{default:n},y=r("../../../../errors/test-run");function S(e,t){var r="number"==typeof e.min,n="number"==typeof e.max,o="number"==typeof e.length;return o&&(e.length=(0,i.default)(e.length,0,t)),r&&e.min<0&&(e.min+=t),n&&e.max<0&&(e.max+=t),r||(e.min=n&&o?e.max-e.length:0),n||(e.max=o?e.min+e.length:t),e.min=(0,i.default)(e.min,0,t),e.max=(0,i.default)(e.max,0,t),e.length=e.max-e.min,e}function I(e,t,r){return Math.round(e+(0,i.default)(t-e,0,r)/2)}t.exports=e.default},"index.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r){return new v(e,t,r).execute()};var i=r("../../deps/hammerhead"),a=r("../../deps/testcafe-core"),s=r("../../deps/testcafe-automation"),n=r("../../deps/testcafe-ui"),l=m(r("../../status")),u=m(r("./ensure-crop-options")),c=r("../../utils/ensure-elements"),o=m(r("../../utils/run-with-barriers")),d=m(r("../../../../test-run/client-messages")),f=m(r("../../../../test-run/commands/type")),h=r("../../../../test-run/commands/options");function m(e){return e&&e.__esModule?e:{default:e}}var p=i.eventSandbox.message,E="driver|browser-manipulation|request",g="driver|browser-manipulation|response";p.on(p.SERVICE_MSG_RECEIVED_EVENT,function(t){if(t.message.cmd===E){var e=a.domUtils.findIframeByWindow(t.source),r=t.message,n=r.command,o=r.cropDimensions;o&&(n.options=new h.ElementScreenshotOptions({crop:o,includePaddings:!1}));var i=new v(n);i.element=e,i.execute().then(function(e){return p.sendServiceMsg({cmd:g,result:e},t.source)})}});var v=(_.prototype._getAbsoluteCropValues=function(){var e=this.element.getBoundingClientRect(),t=e.top,r=e.left;r+=this.command.options.originOffset.x,t+=this.command.options.originOffset.y;var n=r+this.command.options.crop.right,o=t+this.command.options.crop.bottom;return{top:t+=this.command.options.crop.top,left:r+=this.command.options.crop.left,bottom:o,right:n}},_.prototype._createManipulationReadyMessage=function(){var e=window.devicePixelRatio||1,t={cmd:d.default.readyForBrowserManipulation,pageDimensions:{dpr:e,innerWidth:window.innerWidth,innerHeight:window.innerHeight,documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight,bodyWidth:document.body.clientWidth,bodyHeight:document.body.clientHeight},disableResending:!0};return this.command.type===f.default.takeElementScreenshot&&(t.cropDimensions=this._getAbsoluteCropValues()),t},_.prototype._runScrollBeforeScreenshot=function(){var o=this;return i.Promise.resolve().then(function(){if(o.element||!o.command.selector)return i.Promise.resolve();var e=o.command.selector.timeout,t="number"==typeof e?e:o.globalSelectorTimeout;return o.statusBar.showWaitingElementStatus(t),(0,c.ensureElements)([(0,c.createElementDescriptor)(o.command.selector)],o.globalSelectorTimeout).then(function(e){o.statusBar.hideWaitingElementStatus(),o.element=e[0]}).catch(function(e){throw o.statusBar.hideWaitingElementStatus(),e})}).then(function(){(0,u.default)(o.element,o.command.options);var e=o.command.options,t=e.scrollTargetX,r=e.scrollTargetY,n=e.scrollToCenter;return new s.Scroll(o.element,new h.ScrollOptions({offsetX:t,offsetY:r,scrollToCenter:n,skipParentFrames:!0})).run()})},_.prototype._hideUI=function(){return(0,n.hide)(),this.command.markData&&(0,n.showScreenshotMark)(this.command.markData),(0,a.delay)(500)},_.prototype._showUI=function(){this.command.markData&&(0,n.hideScreenshotMark)(),(0,n.show)()},_.prototype._requestManipulation=function(){if(window.top===window)return i.transport.queuedAsyncServiceMsg(this._createManipulationReadyMessage());var e=this._getAbsoluteCropValues();return(0,a.sendRequestToFrame)({cmd:E,command:this.command,cropDimensions:e},g,window.parent).then(function(e){if(!e.result)return{result:null};var t=e.result,r=t.result,n=t.executionError;if(n)throw n;return{result:r}})},_.prototype._runManipulation=function(){var n=this,o=null;return i.Promise.resolve().then(function(){return n.command.type!==f.default.takeElementScreenshot?i.Promise.resolve():(a.scrollController.stopPropagation(),n._runScrollBeforeScreenshot())}).then(function(){return window.top===window?n._hideUI():i.Promise.resolve()}).then(function(){return n._requestManipulation()}).then(function(e){var t=e.result,r=e.error;if(r)throw r;return a.scrollController.enablePropagation(),o=t,window.top===window&&n._showUI(),(0,a.delay)(200)}).then(function(){return new l.default({isCommandResult:!0,result:o})}).catch(function(e){return a.scrollController.enablePropagation(),new l.default({isCommandResult:!0,executionError:e})})},_.prototype.execute=function(){var e=this;return(0,o.default)(function(){return e._runManipulation()}).barriersPromise},_);function _(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),this.command=e,this.globalSelectorTimeout=t,this.statusBar=r,this.element=null}t.exports=e.default}},"client-functions":{"client-function-executor.js":function(e,t,r){e.__esModule=!0;var n=r("../../deps/hammerhead"),o=l(r("../../status")),i=r("./replicator"),a=l(r("./eval-function")),s=r("../../../../errors/test-run");function l(e){return e&&e.__esModule?e:{default:e}}var u=(c.prototype.getResult=function(){var t=this;return n.Promise.resolve().then(function(){var e=t.replicator.decode(t.command.args);return t._executeFn(e)}).catch(function(e){throw e.isTestCafeError||(e=new s.UncaughtErrorInClientFunctionCode(t.command.instantiationCallsiteName,e)),e})},c.prototype.getResultDriverStatus=function(){var t=this;return this.getResult().then(function(e){return new o.default({isCommandResult:!0,result:t.replicator.encode(e)})}).catch(function(e){return new o.default({isCommandResult:!0,executionError:e})})},c.prototype._createReplicator=function(){return(0,i.createReplicator)([new i.ClientFunctionNodeTransform(this.command.instantiationCallsiteName),new i.FunctionTransform])},c.prototype._executeFn=function(e){return this.fn.apply(window,e)},c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.command=e,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(this.command.dependencies),this.fn=(0,a.default)(this.command.fnCode,this.dependencies)}e.default=u,t.exports=e.default},"eval-function.js":function(exports,module,require){exports.__esModule=!0,exports.default=evalFunction;var _hammerhead=require("../../deps/hammerhead"),_hammerhead2=_interopRequireDefault(_hammerhead);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Promise=_hammerhead2.default.Promise;function evalFunction(fnCode,__dependencies$){"use strict";return eval(fnCode)}module.exports=exports.default},"replicator.js":function(e,t,r){e.__esModule=!0,e.ClientFunctionNodeTransform=e.SelectorNodeTransform=e.FunctionTransform=void 0,e.createReplicator=function(e){return new n.default({serialize:d,deserialize:d}).addTransforms(e)};var n=l(r("replicator")),o=l(r("./eval-function")),i=r("./selector-executor/node-snapshots"),a=r("../../../../errors/test-run"),s=l(r("../../deps/hammerhead"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=window.Node,d=function(e){return e};e.FunctionTransform=(f.prototype.shouldTransform=function(e){return"function"===e},f.prototype.toSerializable=function(){return""},f.prototype.fromSerializable=function(e){var t=e.fnCode,r=e.dependencies;return(0,o.default)(t,r)},f);function f(){u(this,f),this.type="Function"}e.SelectorNodeTransform=(h.prototype._extend=function(e,r){var n=this;s.default.nativeMethods.objectKeys.call(window.Object,this.customDOMProperties).forEach(function(t){try{e[t]=n.customDOMProperties[t](r)}catch(e){throw new a.UncaughtErrorInCustomDOMPropertyCode(n.instantiationCallsiteName,e,t)}})},h.prototype.shouldTransform=function(e,t){return t instanceof c},h.prototype.toSerializable=function(e){var t=1===e.nodeType?new i.ElementSnapshot(e):new i.NodeSnapshot(e);return this._extend(t,e),t},h);function h(e){u(this,h),this.type="Node",this.customDOMProperties=e||{}}e.ClientFunctionNodeTransform=(m.prototype.shouldTransform=function(e,t){if(t instanceof c)throw new a.DomNodeClientFunctionResultError(this.instantiationCallsiteName)},m);function m(e){u(this,m),this.type="Node",this.instantiationCallsiteName=e}},"selector-executor":{"filter.js":function(e,t,r){var n,o=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r("../../../../../errors/test-run"),s=r("../../../utils/element-utils"),l=c(r("../../../deps/testcafe-core")),u=c(r("../../../deps/hammerhead"));function c(e){return e&&e.__esModule?e:{default:e}}var d=l.default.arrayUtils,f=u.default.utils.types,h=u.default.nativeMethods,m=1,p=2,E=3,g=((n={})[m]=/^\.filterVisible\(\)$/,n[p]=/^\.filterHidden\(\)$/,n[E]=/^\.nth\(\d+\)$/,n),v=(_.prototype.filter=function(e,t,r){var n=d.filter(e,s.exists);if(t.filterVisible&&(n=n.filter(s.visible),this.assertFilterError(n,r,m)),t.filterHidden&&(n=n.filter(function(e){return!(0,s.visible)(e)}),this.assertFilterError(n,r,p)),t.counterMode)n=null!==t.index?this.getNodeByIndex(n,t.index)?1:0:n.length;else{if(t.collectionMode){if(null!==t.index){var o=this.getNodeByIndex(n,t.index);n=o?[o]:[]}}else n=this.getNodeByIndex(n,t.index||0);"number"==typeof t.index&&this.assertFilterError(n,r,E)}return n},_.prototype.cast=function(e){var t=null;if(f.isNullOrUndefined(e))t=[];else if(e instanceof Node)t=[e];else{if(!(0,s.IsNodeCollection)(e))throw new a.InvalidSelectorResultError;t=e}return t},_.prototype.assertFilterError=function(e,t,r){e&&0!==e.length||(this.error=this.getErrorItem(t,r))},_.prototype.getErrorItem=function(e,t){var r=e.apiFnChain,n=e.apiFnID;if(t)for(var o=n;o<r.length;o++)if(g[t].test(r[o]))return o;return null},_.prototype.getNodeByIndex=function(e,t){return t<0?e[e.length+t]:e[t]},o(_,[{key:"error",get:function(){return this.err},set:function(e){null===this.err&&(this.err=e)}}]),_);function _(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),this.err=null}h.objectDefineProperty.call(window,window,"%testCafeSelectorFilter%",{value:new v,configurable:!0})},"index.js":function(e,t,r){e.__esModule=!0;var n,o=r("../../../deps/hammerhead"),l=r("../../../deps/testcafe-core"),i=r("../client-function-executor"),a=(n=i)&&n.__esModule?n:{default:n},u=r("../../../utils/element-utils"),c=r("../replicator");r("./filter");var d,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,d=a.default),f.prototype._createReplicator=function(){return(0,c.createReplicator)([new c.FunctionTransform])},f.prototype._getTimeoutErrorParams=function(){var e=window["%testCafeSelectorFilter%"].error,t=this.command.apiFnChain;return void 0!==e?{apiFnIndex:e,apiFnChain:t}:null},f.prototype._validateElement=function(i,a){var s=this;return o.Promise.resolve().then(function(){return s.fn.apply(window,i)}).then(function(e){var t=(0,u.exists)(e),r=!s.command.visibilityCheck||(0,u.visible)(e),n=t?s.createIsInvisibleError:s.createNotFoundError,o=new Date-a>=s.timeout;if(t&&r)return e;if(!o)return(0,l.delay)(200).then(function(){return s._validateElement(i,a)});if(n)throw n(s._getTimeoutErrorParams());return null})},f.prototype._executeFn=function(e){if(this.counterMode)return d.prototype._executeFn.call(this,e);var t=new Date,r=null,n=null;return this._validateElement(e,t).catch(function(e){r=e}).then(function(e){if(r)throw r;n=e}).then(function(){return n})},f);function f(e,t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,d.call(this,e));if(i.createNotFoundError=n,i.createIsInvisibleError=o,i.timeout="number"==typeof e.timeout?e.timeout:t,i.counterMode=i.dependencies.filterOptions.counterMode,r){var a=new Date-r;i.timeout=Math.max(i.timeout-a,0)}var s=i.dependencies&&i.dependencies.customDOMProperties;return i.replicator.addTransforms([new c.SelectorNodeTransform(s)]),i}e.default=s,t.exports=e.default},"node-snapshots.js":function(e,t,r){e.__esModule=!0,e.ElementSnapshot=e.NodeSnapshot=void 0;var n=r("../../../deps/testcafe-core"),o=r("../../../../../client-functions/selectors/snapshot-properties");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a={textContent:function(e){return e.textContent},childNodeCount:function(e){return e.childNodes.length},hasChildNodes:function(e){return!!a.childNodeCount(e)},childElementCount:function(e){var t=e.children;if(t)return t.length;for(var r=0,n=e.childNodes.length,o=0;o<n;o++)1===e.childNodes[o].nodeType&&r++;return r},hasChildElements:function(e){return!!a.childElementCount(e)}},s=e.NodeSnapshot=(l.prototype._initializeProperties=function(e,t,r){for(var n=0;n<t.length;n++){var o=t[n],i=r[o];this[o]=i?i(e):e[o]}},l);function l(e){i(this,l),this._initializeProperties(e,o.NODE_SNAPSHOT_PROPERTIES,a)}var u,c={tagName:function(e){return e.tagName.toLowerCase()},visible:n.positionUtils.isElementVisible,focused:function(e){return n.domUtils.getActiveElement()===e},attributes:function(e){for(var t=e.attributes,r={},n=t.length-1;0<=n;n--)r[t[n].name]=t[n].value;return r},boundingClientRect:function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height}},classNames:function(e){var t=e.className;return(t="string"==typeof t.animVal?t.animVal:t).replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(e){for(var t={},r=window.getComputedStyle(e),n=0;n<r.length;n++){var o=r[n];t[o]=r[o]}return t},innerText:function(e){return e.innerText}};e.ElementSnapshot=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,u=s),d);function d(e){i(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,u.call(this,e));return t._initializeProperties(e,o.ELEMENT_SNAPSHOT_PROPERTIES,c),t}}}},"execute-action.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r,n){return new h(e,t,r,n).execute()};var i=r("../deps/hammerhead"),n=r("../deps/testcafe-core"),a=r("../deps/testcafe-automation"),s=d(r("../status")),l=d(r("../utils/run-with-barriers")),o=r("../utils/ensure-elements"),u=r("../../../errors/test-run"),c=d(r("../../../test-run/commands/type"));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!n.domUtils.isContentEditableElement(e))throw new u.ActionElementNonContentEditableError(t)}var h=(m.prototype._getSpecificTimeout=function(){return this.command.selector&&"number"==typeof this.command.selector.timeout?this.command.selector.timeout:this.globalSelectorTimeout},m.prototype._delayAfterExecution=function(){return this.command.options&&1!==this.command.options.speed?(0,n.delay)(2e3*(1-this.command.options.speed)):i.Promise.resolve()},m.prototype._isExecutionTimeoutExpired=function(){return Date.now()-this.executionStartTime>=this.commandSelectorTimeout},m.prototype._ensureCommandArguments=function(){if(this.command.type===c.default.pressKey&&(0,n.parseKeySequence)(this.command.keys).error)throw new u.ActionIncorrectKeysError("keys")},m.prototype._ensureCommandElements=function(){var t=this,e=[];return this.command.selector&&e.push((0,o.createElementDescriptor)(this.command.selector)),this.command.type===c.default.dragToElement?e.push((0,o.createAdditionalElementDescriptor)(this.command.destinationSelector,"destinationSelector")):this.command.type===c.default.selectEditableContent&&(e.push((0,o.createAdditionalElementDescriptor)(this.command.startSelector,"startSelector")),e.push((0,o.createAdditionalElementDescriptor)(this.command.endSelector||this.command.startSelector,"endSelector"))),(0,o.ensureElements)(e,this.globalSelectorTimeout).then(function(e){t.elements=e})},m.prototype._ensureCommandElementsProperties=function(){this.command.type===c.default.selectText?function(e){if(!n.domUtils.isEditableElement(e))throw new u.ActionElementNonEditableError}(this.elements[0]):this.command.type===c.default.selectTextAreaContent?function(e){if(!n.domUtils.isTextAreaElement(e))throw new u.ActionElementNotTextAreaError}(this.elements[0]):this.command.type===c.default.selectEditableContent?(f(this.elements[0],"startSelector"),f(this.elements[1],"endSelector"),function(e){if(!n.contentEditable.getNearestCommonAncestor(e[0],e[1]))throw new u.ActionRootContainerNotFoundError}(this.elements)):this.command.type!==c.default.setFilesToUpload&&this.command.type!==c.default.clearUpload||function(e){if(!n.domUtils.isFileInput(e))throw new u.ActionElementIsNotFileInputError}(this.elements[0])},m.prototype._ensureCommandOptions=function(){var e,t,r,n,o;this.elements.length&&this.command.options&&"offsetX"in this.command.options&&"offsetY"in this.command.options&&(e=this.elements[0],t=this.command.options,r=(0,a.getOffsetOptions)(e,t.offsetX,t.offsetY),n=r.offsetX,o=r.offsetY,t.offsetX=n,t.offsetY=o)},m.prototype._createAutomation=function(){var e=null;switch(this.command.type){case c.default.click:return/option|optgroup/.test(n.domUtils.getTagName(this.elements[0]))?new a.SelectChildClick(this.elements[0],this.command.options):new a.Click(this.elements[0],this.command.options);case c.default.rightClick:return new a.RClick(this.elements[0],this.command.options);case c.default.doubleClick:return new a.DblClick(this.elements[0],this.command.options);case c.default.hover:return new a.Hover(this.elements[0],this.command.options);case c.default.drag:return new a.DragToOffset(this.elements[0],this.command.dragOffsetX,this.command.dragOffsetY,this.command.options);case c.default.dragToElement:return new a.DragToElement(this.elements[0],this.elements[1],this.command.options);case c.default.typeText:return new a.Type(this.elements[0],this.command.text,this.command.options);case c.default.selectText:case c.default.selectTextAreaContent:return e=(0,a.calculateSelectTextArguments)(this.elements[0],this.command),new a.SelectText(this.elements[0],e.startPos,e.endPos,this.command.options);case c.default.selectEditableContent:return new a.SelectEditableContent(this.elements[0],this.elements[1],this.command.options);case c.default.pressKey:return new a.Press((0,n.parseKeySequence)(this.command.keys).combinations,this.command.options);case c.default.setFilesToUpload:return new a.Upload(this.elements[0],this.command.filePath,function(e){return new u.ActionCannotFindFileToUploadError(e)});case c.default.clearUpload:return new a.Upload(this.elements[0])}return null},m.prototype._runAction=function(t){var r=this;return this._ensureCommandElements().then(function(){return r._ensureCommandElementsProperties()}).then(function(){r._ensureCommandOptions();var e=r._createAutomation();return e.TARGET_ELEMENT_FOUND_EVENT?e.on(e.TARGET_ELEMENT_FOUND_EVENT,function(){r.statusBar.hideWaitingElementStatus(!0),r.executionStartedHandler()}):(r.statusBar.hideWaitingElementStatus(!0),r.executionStartedHandler()),e.run(t)})},m.prototype._runRecursively=function(){var t=this,e=!1,r=!0;return n.promiseUtils.whilst(function(){return!e},function(){return t._runAction(r).then(function(){e=!0}).catch(function(e){if(t._isExecutionTimeoutExpired()){if(e.message===a.ERROR_TYPES.foundElementIsNotTarget)return r=!1,i.Promise.resolve();throw e.message===a.ERROR_TYPES.elementIsInvisibleError?new u.ActionElementIsInvisibleError:e}return(0,n.delay)(250)})})},m.prototype.execute=function(){var o=this;return this.command.options&&!this.command.options.speed&&(this.command.options.speed=this.testSpeed),{startPromise:new i.Promise(function(e){o.executionStartedHandler=e}),completionPromise:new i.Promise(function(t){o.executionStartTime=new Date;try{o._ensureCommandArguments()}catch(e){return void t(new s.default({isCommandResult:!0,executionError:e}))}o.commandSelectorTimeout=o._getSpecificTimeout(),o.statusBar.showWaitingElementStatus(o.commandSelectorTimeout);var e=(0,l.default)(function(){return o._runRecursively()}),r=e.actionPromise,n=e.barriersPromise;r.then(function(){return i.Promise.all([o._delayAfterExecution(),n])}).then(function(){return t(new s.default({isCommandResult:!0}))}).catch(function(e){return o.statusBar.hideWaitingElementStatus(!1).then(function(){return t(new s.default({isCommandResult:!0,executionError:e}))})})})}},m);function m(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this.command=e,this.globalSelectorTimeout=t,this.statusBar=r,this.testSpeed=n,this.elements=[],this.ensureElementsPromise=null,this.ensureElementsStartTime=null,this.executionStartTime=null,this.executionStartedHandler=null,this.commandSelectorTimeout=null}t.exports=e.default},"execute-child-window-driver-link-selector.js":function(e,t,r){e.__esModule=!0,e.default=function(t,e){if("string"!=typeof t)return l.resolve(null);var r=s.arrayUtils.find(e,function(e){return e.windowId===t});if(r)return l.resolve(r);var n=new a.ChildWindowNotFoundError;return l.reject(n)};var n,o=r("../deps/hammerhead"),i=(n=o)&&n.__esModule?n:{default:n},a=r("../../../errors/test-run"),s=r("../deps/testcafe-core");var l=i.default.Promise;t.exports=e.default},"execute-navigate-to.js":function(e,t,r){e.__esModule=!0,e.default=function(t){var e=l.url.getNavigationUrl(t.url,window),r=n.default.Promise.resolve();e&&o.browser.isRetryingTestPagesEnabled()&&(r=o.browser.fetchPageToCache(e,s));return r.then(function(){var e=new o.RequestBarrier;return n.default.navigateTo(t.url,t.forceReload),n.default.Promise.all([e.wait(),o.pageUnloadBarrier.wait()])}).then(function(){return new i.default({isCommandResult:!0})}).catch(function(e){return new i.default({isCommandResult:!0,executionError:e})})};var n=a(r("../deps/hammerhead")),o=r("../deps/testcafe-core"),i=a(r("../status"));function a(e){return e&&e.__esModule?e:{default:e}}var s=n.default.createNativeXHR,l=n.default.utils;t.exports=e.default},"execute-selector.js":function(e,t,r){e.__esModule=!0,e.getResult=function(e,t,r,n,o,i){var a=new s.default(e,t,r,n,o);return i.showWaitingElementStatus(a.timeout),a.getResult().then(function(e){return i.hideWaitingElementStatus(!!e).then(function(){return e})}).catch(function(e){return i.hideWaitingElementStatus(!1).then(function(){throw e})})},e.getResultDriverStatus=function(e,t,r,n,o,i){var a=new s.default(e,t,r,n,o);return i.showWaitingElementStatus(a.timeout),a.getResultDriverStatus().then(function(e){return i.hideWaitingElementStatus(!!e.result).then(function(){return e})})};var n,o=r("./client-functions/selector-executor"),s=(n=o)&&n.__esModule?n:{default:n}}},deps:{"hammerhead.js":function(e,t,r){e.__esModule=!0,e.default=window["%hammerhead%"],t.exports=e.default},"testcafe-automation.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeAutomation%"],t.exports=e.default},"testcafe-core.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeUI%"],t.exports=e.default}},"driver-link":{iframe:{"child.js":function(e,t,r){e.__esModule=!0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r("../../deps/hammerhead"),a=r("../../deps/testcafe-core"),s=r("../../../../errors/test-run"),l=h(r("../send-message-to-driver")),u=r("../messages"),c=h(r("../../status")),d=r("../timeouts"),f=h(r("../send-confirmation-message"));function h(e){return e&&e.__esModule?e:{default:e}}var m=(p.prototype._ensureIframe=function(){var e=this;return a.domUtils.isElementInDocument(this.driverIframe)?(0,a.waitFor)(function(){return a.positionUtils.isElementVisible(e.driverIframe)?e.driverIframe:null},d.CHECK_IFRAME_VISIBLE_INTERVAL,this.iframeAvailabilityTimeout).catch(function(){throw new s.CurrentIframeIsInvisibleError}):i.Promise.reject(new s.CurrentIframeNotFoundError)},p.prototype._waitForIframeRemovedOrHidden=function(){var t=this;return new i.Promise(function(e){t.checkIframeInterval=i.nativeMethods.setInterval.call(window,function(){t._ensureIframe().catch(function(){return(0,a.delay)(d.WAIT_IFRAME_RESPONSE_DELAY).then(function(){return e(new c.default({isCommandResult:!0}))})})},d.CHECK_IFRAME_EXISTENCE_INTERVAL)})},p.prototype._waitForCommandResult=function(){var t=this,r=null;return i.Promise.race([this._waitForIframeRemovedOrHidden(),new i.Promise(function(t){r=function(e){e.message.type===u.TYPE.commandExecuted&&t(e.message.driverStatus)},i.eventSandbox.message.on(i.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,r)})]).then(function(e){return i.eventSandbox.message.off(i.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,r),i.nativeMethods.clearInterval.call(window,t.checkIframeInterval),e})},p.prototype.sendConfirmationMessage=function(e){(0,f.default)({requestMsgId:e,result:{id:this.driverId},window:this.driverWindow})},p.prototype.executeCommand=function(t,r){var n=this;return this._ensureIframe().then(function(){var e=new u.ExecuteCommandMessage(t,r);return i.Promise.all([(0,l.default)(e,n.driverWindow,n.iframeAvailabilityTimeout,s.CurrentIframeIsNotLoadedError),n._waitForCommandResult()])}).then(function(e){return e[1]})},n(p,[{key:"availabilityTimeout",set:function(e){this.iframeAvailabilityTimeout=e}}]),p);function p(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this.driverWindow=e,this.driverIframe=a.domUtils.findIframeByWindow(e),this.driverId=t,this.iframeAvailabilityTimeout=0}e.default=m,t.exports=e.default},"parent.js":function(e,t,r){e.__esModule=!0;var n=r("../../deps/hammerhead"),o=r("../messages"),i=r("../../../../errors/test-run"),a=u(r("../send-message-to-driver")),s=r("../timeouts"),l=u(r("../send-confirmation-message"));function u(e){return e&&e.__esModule?e:{default:e}}var c=(d.prototype.establishConnection=function(){var e=new o.EstablishConnectionMessage;return(0,a.default)(e,this.driverWindow,s.WAIT_FOR_WINDOW_DRIVER_RESPONSE_TIMEOUT,i.CurrentIframeIsNotLoadedError).then(function(e){return e.result.id})},d.prototype.sendConfirmationMessage=function(e){(0,l.default)({requestMsgId:e,window:this.driverWindow})},d.prototype.onCommandExecuted=function(e){var t=new o.CommandExecutedMessage(e);n.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.driverWindow=e}e.default=c,t.exports=e.default}},"messages.js":function(e,t,r){e.__esModule=!0,e.CloseAllChildWindowsMessage=e.SetAsMasterMessage=e.SetNativeDialogHandlerMessage=e.ConfirmationMessage=e.ExecuteCommandMessage=e.CommandExecutedMessage=e.EstablishConnectionMessage=e.TYPE=void 0;var n,o=r("../generate-id"),i=(n=o)&&n.__esModule?n:{default:n};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){l(this,u),this.type=e,this.id=(0,i.default)()}var c,d=e.TYPE={establishConnection:"driver|establish-connection",commandExecuted:"driver|command-executed",executeCommand:"driver|execute-command",confirmation:"driver|confirmation",setNativeDialogHandler:"driver|set-native-dialog-handler",setAsMaster:"driver|set-as-master",closeAllChildWindows:"driver|close-all-child-windows"};e.EstablishConnectionMessage=(s(f,c=u),f);function f(){return l(this,f),a(this,c.call(this,d.establishConnection))}var h;e.CommandExecutedMessage=(s(m,h=u),m);function m(e){l(this,m);var t=a(this,h.call(this,d.commandExecuted));return t.driverStatus=e,t}var p;e.ExecuteCommandMessage=(s(E,p=u),E);function E(e,t){l(this,E);var r=a(this,p.call(this,d.executeCommand));return r.command=e,r.testSpeed=t,r}var g;e.ConfirmationMessage=(s(v,g=u),v);function v(e,t){l(this,v);var r=a(this,g.call(this,d.confirmation));return r.requestMessageId=e,r.result=t,r}var _;e.SetNativeDialogHandlerMessage=(s(w,_=u),w);function w(e){l(this,w);var t=a(this,_.call(this,d.setNativeDialogHandler));return t.dialogHandler=e,t}var y;e.SetAsMasterMessage=(s(S,y=u),S);function S(){return l(this,S),a(this,y.call(this,d.setAsMaster))}var I;e.CloseAllChildWindowsMessage=(s(C,I=u),C);function C(){return l(this,C),a(this,I.call(this,d.closeAllChildWindows))}},"send-confirmation-message.js":function(e,t,r){e.__esModule=!0,e.default=function(e){var t=e.requestMsgId,r=e.result,n=e.window,o=new i.ConfirmationMessage(t,r);a.eventSandbox.message.sendServiceMsg(o,n)};var i=r("./messages"),a=r("../deps/hammerhead");t.exports=e.default},"send-message-to-driver.js":function(e,t,r){e.__esModule=!0,e.default=function(r,e,t,n){var o=null,i=null;t=Math.max(t||0,u);return a.Promise.race([(0,s.delay)(t),new a.Promise(function(t){i=function(e){e.message.type===l.TYPE.confirmation&&e.message.requestMessageId===r.id&&t(e.message)},a.eventSandbox.message.on(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),o=a.nativeMethods.setInterval.call(window,function(){return a.eventSandbox.message.sendServiceMsg(r,e)},c),a.eventSandbox.message.sendServiceMsg(r,e)})]).then(function(e){if(a.nativeMethods.clearInterval.call(window,o),a.nativeMethods.clearTimeout.call(window,null),a.eventSandbox.message.off(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),!e)throw new n;return e})};var a=r("../deps/hammerhead"),s=r("../deps/testcafe-core"),l=r("./messages"),u=2500,c=1e3;t.exports=e.default},"timeouts.js":function(e,t,r){e.__esModule=!0;e.WAIT_FOR_WINDOW_DRIVER_RESPONSE_TIMEOUT=5e3,e.CHECK_IFRAME_EXISTENCE_INTERVAL=1e3,e.CHECK_IFRAME_VISIBLE_INTERVAL=200,e.WAIT_IFRAME_RESPONSE_DELAY=500,e.CHECK_CHILD_WINDOW_CLOSED_INTERVAL=200},window:{"child.js":function(e,t,r){e.__esModule=!0;var n,o=r("../messages"),i=r("../send-message-to-driver"),a=(n=i)&&n.__esModule?n:{default:n},s=r("../../../../errors/test-run"),l=r("../timeouts");var u=(c.prototype.setAsMaster=function(){var e=new o.SetAsMasterMessage;return(0,a.default)(e,this.driverWindow,l.WAIT_FOR_WINDOW_DRIVER_RESPONSE_TIMEOUT,s.CannotSwitchToWindowError)},c.prototype.closeAllChildWindows=function(){var e=new o.CloseAllChildWindowsMessage;return(0,a.default)(e,this.driverWindow,l.WAIT_FOR_WINDOW_DRIVER_RESPONSE_TIMEOUT,s.CloseChildWindowError)},c);function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.driverWindow=e,this.windowId=t}e.default=u,t.exports=e.default},"parent.js":function(e,t,r){e.__esModule=!0;var n,o=r("../messages"),i=r("../send-message-to-driver"),a=(n=i)&&n.__esModule?n:{default:n},s=r("../../../../errors/test-run"),l=r("../timeouts");var u=(c.prototype._getTopOpenedWindow=function(e){for(var t=e;t.opener;)t=t.opener;return t},c.prototype._setAsMaster=function(e){var t=new o.SetAsMasterMessage;return(0,a.default)(t,e,l.WAIT_FOR_WINDOW_DRIVER_RESPONSE_TIMEOUT,s.CannotSwitchToWindowError)},c.prototype.setTopOpenedWindowAsMaster=function(){var e=this._getTopOpenedWindow(this.currentDriverWindow);return this._setAsMaster(e)},c.prototype.setParentWindowAsMaster=function(){var e=this.currentDriverWindow.opener;return this._setAsMaster(e)},c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.currentDriverWindow=e}e.default=u,t.exports=e.default}}},"driver.js":function(e,t,r){e.__esModule=!0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=O(r("./deps/hammerhead")),a=r("./deps/testcafe-core"),s=r("../../utils/browser-connection-timeouts"),l=r("./deps/testcafe-ui"),u=O(r("../../test-run/client-messages")),c=O(r("../../test-run/commands/type")),d=r("../../test-run/commands/utils"),f=r("../../errors/test-run"),h=O(r("../../test-run/browser-console-messages")),m=O(r("./native-dialog-tracker")),p=r("./driver-link/messages"),E=O(r("./storage")),g=O(r("./status")),v=O(r("./generate-id")),_=O(r("./driver-link/iframe/child")),w=O(r("./command-executors/execute-action")),y=O(r("./command-executors/browser-manipulation")),S=O(r("./command-executors/execute-navigate-to")),I=r("./command-executors/execute-selector"),C=O(r("./command-executors/execute-child-window-driver-link-selector")),T=O(r("./command-executors/client-functions/client-function-executor")),R=O(r("./driver-link/window/child")),N=O(r("./driver-link/window/parent")),b=O(r("./driver-link/send-confirmation-message")),A=O(r("../automation/cursor")),x=O(r("./role")),M=r("./driver-link/timeouts");function O(e){return e&&e.__esModule?e:{default:e}}var D,P=i.default.transport,W=i.default.Promise,U=i.default.eventSandbox.message,F=i.default.storages,k=i.default.nativeMethods,L=k.date,H="testcafe|driver|test-done-sent-flag",j="testcafe|driver|pending-status",B="testcafe|driver|executing-client-function-descriptor",V="testcafe|driver|selector-execution-start-time",G="testcafe|driver|pending-page-error",z="testcafe|driver|active-iframe-selector",Y="testcafe|driver|test-speed",X="testcafe|driver|assertion-retries-timeout",q="testcafe|driver|assertion-retries-start-time",K="testcafe|driver|console-messages",J={NotLoadedError:f.ActionIframeIsNotLoadedError,NotFoundError:f.ActionElementNotFoundError,IsInvisibleError:f.ActionElementIsInvisibleError},$={NotLoadedError:f.CurrentIframeIsNotLoadedError,NotFoundError:f.CurrentIframeNotFoundError,IsInvisibleError:f.CurrentIframeIsInvisibleError},Q=Math.pow(2,31)-1,Z="status-with-command-result-event",ee="empty-command-event",te=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(re,D=a.serviceUtils.EventEmitter),re.prototype._hasPendingActionFlags=function(e){return e.getItem(this.COMMAND_EXECUTING_FLAG)||e.getItem(this.EXECUTING_IN_IFRAME_FLAG)},re.prototype._getCurrentWindowId=function(){var e=window.location.toString(),t=i.default.utils.url.parseProxyUrl(e);return t&&t.windowId||null},re.prototype._onJsError=function(e){if(this.skipJsErrors||this.contextStorage.getItem(H))return W.resolve();var t=new f.UncaughtErrorOnPage(e.stack,e.pageUrl);return this.contextStorage.getItem(G)||this.contextStorage.setItem(G,t),null},re.prototype._unlockPageAfterTestIsDone=function(){return(0,a.disableRealEventsPreventing)(),W.resolve()},re.prototype._failIfClientCodeExecutionIsInterrupted=function(){var e=this.contextStorage.getItem(B);return!!e&&(this._onReady(new g.default({isCommandResult:!0,executionError:new f.ClientFunctionExecutionInterruptionError(e.instantiationCallsiteName)})),!0)},re.prototype.onCustomClientScriptError=function(e,t){var r=t?new f.UncaughtErrorInCustomClientScriptLoadedFromModule(e,t):new f.UncaughtErrorInCustomClientScriptCode(e);this.contextStorage.getItem(G)||this.contextStorage.setItem(G,r)},re.prototype._addChildWindowDriverLink=function(e){var t=new R.default(e.window,e.windowId);this.childWindowDriverLinks.push(t),this._ensureClosedChildWindowWatcher()},re.prototype._ensureClosedChildWindowWatcher=function(){var t=this;this.checkClosedChildWindowIntervalId||(this.checkClosedChildWindowIntervalId=k.setInterval.call(window,function(){var e=a.arrayUtils.find(t.childWindowDriverLinks,function(e){return e.driverWindow.closed});e&&(a.arrayUtils.remove(t.childWindowDriverLinks,e),t._setCurrentWindowAsMaster(),t.childWindowDriverLinks.length||k.clearInterval.call(window,t.checkClosedChildWindowIntervalId))},M.CHECK_CHILD_WINDOW_CLOSED_INTERVAL))},re.prototype._setAsMasterInProgressOrCompleted=function(){return this.setAsMasterInProgress||this.role===x.default.master},re.prototype._setCurrentWindowAsMaster=function(){var e=this;this._setAsMasterInProgressOrCompleted()||(this.setAsMasterInProgress=!0,W.resolve().then(function(){return a.browser.setActiveWindowId(e.browserActiveWindowId,i.default.createNativeXHR,e.windowId)}).then(function(){e._startInternal({finalizePendingCommand:!0}),e.setAsMasterInProgress=!1}).catch(function(){e._onReady(new g.default({isCommandResult:!0,executionError:new f.CannotSwitchToWindowError}))}))},re.prototype._onChildWindowOpened=function(e){this._addChildWindowDriverLink(e),this._switchToChildWindow(e.windowId)},re.prototype._onFormSubmit=function(e){this.contextStorage&&this.contextStorage.getItem(H)&&(e.preventSubmit=!0)},re.prototype._onConsoleMessage=function(e){var t=e.meth,r=e.line,n=this.consoleMessages;n.addMessage(t,r,this.windowId),this.consoleMessages=n},re.prototype._addPendingErrorToStatus=function(e){var t=this.contextStorage.getItem(G);t&&(this.contextStorage.setItem(G,null),e.pageError=t)},re.prototype._addUnexpectedDialogErrorToStatus=function(e){var t=this.nativeDialogsTracker.getUnexpectedDialogError();e.pageError=e.pageError||t},re.prototype._addConsoleMessagesToStatus=function(e){e.consoleMessages=this.consoleMessages,this.consoleMessages=null},re.prototype._addPendingWindowSwitchingStateToStatus=function(e){e.isPendingWindowSwitching=!!this.contextStorage.getItem(this.PENDING_WINDOW_SWITCHING_FLAG)},re.prototype._sendStatusRequest=function(e){function t(){return(0,a.getTimeLimitedPromise)(P.asyncServiceMsg(n),s.SEND_STATUS_REQUEST_TIME_LIMIT)}function r(){return(0,a.delay)(s.SEND_STATUS_REQUEST_RETRY_DELAY).then(t)}for(var n={cmd:u.default.ready,status:e,disableResending:!0,allowRejecting:!0},o=t(),i=0;i<s.SEND_STATUS_REQUEST_RETRY_COUNT;i++)o=o.catch(r);return o},re.prototype._sendStatus=function(e){var t=this;e.resent||(this._addPendingErrorToStatus(e),this._addUnexpectedDialogErrorToStatus(e),this._addConsoleMessagesToStatus(e),this._addPendingWindowSwitchingStateToStatus(e)),this.contextStorage.setItem(j,e);var r=null;return a.pageUnloadBarrier.wait(0).then(function(){return t._sendStatusRequest(e)}).then(function(e){return r=e,a.pageUnloadBarrier.wait(0)}).then(function(){return t.contextStorage.setItem(j,null),r})},re.prototype._addChildIframeDriverLink=function(e,t){var r=this._getChildIframeDriverLinkByWindow(t);if(!r){var n=this.testRunId+"-"+(0,v.default)();r=new _.default(t,n),this.childIframeDriverLinks.push(r)}r.sendConfirmationMessage(e)},re.prototype._handleSetAsMasterMessage=function(e,t){var r=this;this._setAsMasterInProgressOrCompleted()||(this.setAsMasterInProgress=!0,(0,b.default)({requestMsgId:e.id,window:t}),W.resolve().then(function(){return a.browser.setActiveWindowId(r.browserActiveWindowId,i.default.createNativeXHR,r.windowId)}).then(function(){r._startInternal(),r.setAsMasterMessageReceived=!1}).catch(function(){r._onReady(new g.default({isCommandResult:!0,executionError:new f.CannotSwitchToWindowError}))}))},re.prototype._handleCloseAllWindowsMessage=function(e,t){var r=this;this._closeAllChildWindows().then(function(){(0,b.default)({requestMsgId:e.id,window:t})}).catch(function(){r._onReady(new g.default({isCommandResult:!0,executionError:new f.CloseChildWindowError}))})},re.prototype._initChildDriverListening=function(){var n=this;U.on(U.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message,r=e.source;t.type===p.TYPE.establishConnection?n._addChildIframeDriverLink(t.id,r):t.type===p.TYPE.setAsMaster?n._handleSetAsMasterMessage(t,r):t.type===p.TYPE.closeAllChildWindows&&n._handleCloseAllWindowsMessage(t,r)})},re.prototype._getChildIframeDriverLinkByWindow=function(t){return a.arrayUtils.find(this.childIframeDriverLinks,function(e){return e.driverWindow===t})},re.prototype._getChildWindowDriverLinkByWindow=function(t){return a.arrayUtils.find(this.childWindowDriverLinks,function(e){return e.driverWindow===t})},re.prototype._runInActiveIframe=function(e){var t=this,r=W.resolve(),n=this.contextStorage.getItem(z);!this.activeChildIframeDriverLink&&n&&(r=this._switchToIframe(n,$)),r.then(function(){return t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!0),t.activeChildIframeDriverLink.executeCommand(e,t.speed)}).then(function(e){return t._onCommandExecutedInIframe(e)}).catch(function(e){return t._onCommandExecutedInIframe(new g.default({isCommandResult:!0,executionError:e}))})},re.prototype._onCommandExecutedInIframe=function(e){this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(e)},re.prototype._ensureChildIframeDriverLink=function(e,t,r){var n=this;return(0,a.waitFor)(function(){return n._getChildIframeDriverLinkByWindow(e)},s.CHECK_IFRAME_DRIVER_LINK_DELAY,r).catch(function(){throw new t})},re.prototype._ensureChildWindowDriverLink=function(e,t,r){var n=this;return(0,a.waitFor)(function(){return n._getChildWindowDriverLinkByWindow(e)},s.CHECK_CHILD_WINDOW_DRIVER_LINK_DELAY,r).catch(function(){throw new t})},re.prototype._switchToIframe=function(t,r){var n=this,o="number"==typeof t.timeout?t.timeout:this.selectorTimeout;return(0,I.getResult)(t,o,null,function(e){return new r.NotFoundError(e)},function(){return new r.IsInvisibleError},this.statusBar).then(function(e){if(!a.domUtils.isIframeElement(e))throw new f.ActionElementNotIframeError;return n._ensureChildIframeDriverLink(k.contentWindowGetter.call(e),r.NotLoadedError,o)}).then(function(e){e.availabilityTimeout=o,n.activeChildIframeDriverLink=e,n.contextStorage.setItem(z,t)})},re.prototype._createWaitForEventPromise=function(t,r){var n=this,o=null,e=new W(function(e){k.setTimeout.call(window,function(){n.off(t,o),e()},r)}),i=new W(function(e){o=function(){this.off(t,o),e()},n.on(t,o)});return W.race([e,i])},re.prototype._waitForCurrentCommandCompletion=function(){return this.contextStorage.getItem(this.COMMAND_EXECUTING_FLAG)?this._createWaitForEventPromise(Z,Q):W.resolve()},re.prototype._waitForEmptyCommand=function(){return this._createWaitForEventPromise(ee,3e4)},re.prototype._switchToChildWindow=function(e){var t=this;return this.contextStorage.setItem(this.PENDING_WINDOW_SWITCHING_FLAG,!0),(0,C.default)(e,this.childWindowDriverLinks).then(function(e){return t._ensureChildWindowDriverLink(e.driverWindow,f.ChildWindowIsNotLoadedError,t.childWindowReadyTimeout)}).then(function(e){return t.activeChildWindowDriverLink=e,t._waitForCurrentCommandCompletion()}).then(function(){return t._waitForEmptyCommand()}).then(function(){return t._stopInternal(),t.activeChildWindowDriverLink.setAsMaster()}).then(function(){t.contextStorage.setItem(t.PENDING_WINDOW_SWITCHING_FLAG,!1)}).catch(function(){t.contextStorage.setItem(t.PENDING_WINDOW_SWITCHING_FLAG,!1),t._onReady(new g.default({isCommandResult:!0,executionError:new f.CannotSwitchToWindowError}))})},re.prototype._switchToTopParentWindow=function(){var e=this.parentWindowDriverLink.setTopOpenedWindowAsMaster.bind(this.parentWindowDriverLink);this._switchToParentWindowInternal(e)},re.prototype._switchToParentWindow=function(){var e=this.parentWindowDriverLink.setParentWindowAsMaster.bind(this.parentWindowDriverLink);this._switchToParentWindowInternal(e)},re.prototype._switchToParentWindowInternal=function(e){var t=this;return this.contextStorage.setItem(this.PENDING_WINDOW_SWITCHING_FLAG,!0),W.resolve().then(function(){return t._stopInternal(),e()}).then(function(){t.contextStorage.setItem(t.PENDING_WINDOW_SWITCHING_FLAG,!1)}).catch(function(){t.contextStorage.setItem(t.PENDING_WINDOW_SWITCHING_FLAG,!1),t._onReady(new g.default({isCommandResult:!0,executionError:new f.CannotSwitchToWindowError}))})},re.prototype._switchToMainWindow=function(e){this.activeChildIframeDriverLink&&this.activeChildIframeDriverLink.executeCommand(e),this.contextStorage.setItem(z,null),this.activeChildIframeDriverLink=null},re.prototype._setNativeDialogHandlerInIframes=function(e){for(var t=new p.SetNativeDialogHandlerMessage(e),r=0;r<this.childIframeDriverLinks.length;r++)U.sendServiceMsg(t,this.childIframeDriverLinks[r].driverWindow)},re.prototype._onActionCommand=function(e){var t=this,r=(0,w.default)(e,this.selectorTimeout,this.statusBar,this.speed),n=r.startPromise,o=r.completionPromise;n.then(function(){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!0)}),o.then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},re.prototype._onSetNativeDialogHandlerCommand=function(e){this.nativeDialogsTracker.setHandler(e.dialogHandler),this._setNativeDialogHandlerInIframes(e.dialogHandler),this._onReady(new g.default({isCommandResult:!0}))},re.prototype._onGetNativeDialogHistoryCommand=function(){this._onReady(new g.default({isCommandResult:!0,result:this.nativeDialogsTracker.appearedDialogs}))},re.prototype._onGetBrowserConsoleMessagesCommand=function(){this._onReady(new g.default({isCommandResult:!0}))},re.prototype._onNavigateToCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,S.default)(e).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},re.prototype._onExecuteClientFunctionCommand=function(e){var t=this;this.contextStorage.setItem(B,{instantiationCallsiteName:e.instantiationCallsiteName}),new T.default(e).getResultDriverStatus().then(function(e){t.contextStorage.setItem(B,null),t._onReady(e)})},re.prototype._onExecuteSelectorCommand=function(e){var t=this,r=this.contextStorage.getItem(V)||new L,n=e.needError?function(e){return new f.CannotObtainInfoForElementSpecifiedBySelectorError(null,e)}:null;(0,I.getResultDriverStatus)(e,this.selectorTimeout,r,n,n,this.statusBar).then(function(e){t.contextStorage.setItem(V,null),t._onReady(e)})},re.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e),this._onReady(new g.default({isCommandResult:!0}))},re.prototype._onSwitchToIframeCommand=function(e){var t=this;this._switchToIframe(e.selector,J).then(function(){return t._onReady(new g.default({isCommandResult:!0}))}).catch(function(e){return t._onReady(new g.default({isCommandResult:!0,executionError:e}))})},re.prototype._onBrowserManipulationCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,y.default)(e,this.selectorTimeout,this.statusBar).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},re.prototype._onSetBreakpointCommand=function(e){var t=this;this.statusBar.showDebuggingStatus(e).then(function(e){return t._onReady(new g.default({isCommandResult:!0,result:e}))})},re.prototype._onSetTestSpeedCommand=function(e){this.speed=e.speed,this._onReady(new g.default({isCommandResult:!0}))},re.prototype._onShowAssertionRetriesStatusCommand=function(e){this.contextStorage.setItem(X,e.timeout),this.contextStorage.setItem(q,Date.now()),this.statusBar.showWaitingAssertionRetriesStatus(e.timeout),this._onReady(new g.default({isCommandResult:!0}))},re.prototype._onHideAssertionRetriesStatusCommand=function(e){var t=this;this.contextStorage.setItem(X,null),this.contextStorage.setItem(q,null),this.statusBar.hideWaitingAssertionRetriesStatus(e.success).then(function(){return t._onReady(new g.default({isCommandResult:!0}))})},re.prototype._checkStatus=function(){var n=this;return a.browser.checkStatus(this.browserStatusDoneUrl,i.default.createNativeXHR,{manualRedirect:!0}).then(function(e){var t=e.command,r=e.redirecting;r&&t.url.indexOf(n.testRunId)<0?(F.clear(),F.lock()):n.contextStorage.setItem(H,!1),r?a.browser.redirect(t):n._onReady({isCommandResult:!1})}).catch(function(){return(0,a.delay)(s.CHECK_STATUS_RETRY_DELAY)})},re.prototype._onCustomCommand=function(e){var t=this;(0,this.customCommandHandlers[e.type].handler)(e).then(function(e){t._onReady(new g.default({isCommandResult:!0,result:e}))})},re.prototype._closeAllChildWindows=function(){var e=this;return this.childWindowDriverLinks.length?W.all(this.childWindowDriverLinks.map(function(e){return e.closeAllChildWindows()})).then(function(){k.arrayForEach.call(e.childWindowDriverLinks,function(e){e.driverWindow.close()})}):W.resolve()},re.prototype._onTestDone=function(e){var t=this;this.contextStorage.setItem(H,!0),this.parentWindowDriverLink?this._switchToTopParentWindow():this._closeAllChildWindows().then(function(){return t._sendStatus(e)}).then(function(){t._checkStatus()}).catch(function(){t._onReady(new g.default({isCommandResult:!0,executionError:f.CloseChildWindowError}))})},re.prototype._onBackupStoragesCommand=function(){this._onReady(new g.default({isCommandResult:!0,result:F.backup()}))},re.prototype._isStatusWithCommandResultInPendingWindowSwitchingMode=function(e){return e.isCommandResult&&!!this.contextStorage.getItem(this.PENDING_WINDOW_SWITCHING_FLAG)},re.prototype._isEmptyCommandInPendingWindowSwitchingMode=function(e){return!e&&!!this.contextStorage.getItem(this.PENDING_WINDOW_SWITCHING_FLAG)},re.prototype._onReady=function(e){var t=this;this._isStatusWithCommandResultInPendingWindowSwitchingMode(e)&&this.emit(Z),this._sendStatus(e).then(function(e){if(e)t._onCommand(e);else{if(t._isEmptyCommandInPendingWindowSwitchingMode(e))return void t.emit(ee);t._onReady(new g.default)}})},re.prototype._executeCommand=function(e){this.customCommandHandlers[e.type]?this._onCustomCommand(e):e.type===c.default.testDone?this._onTestDone(new g.default({isCommandResult:!0})):e.type===c.default.setBreakpoint?this._onSetBreakpointCommand(e.isTestError):e.type===c.default.switchToMainWindow?this._onSwitchToMainWindowCommand(e):e.type===c.default.switchToIframe?this._onSwitchToIframeCommand(e):(0,d.isBrowserManipulationCommand)(e)?this._onBrowserManipulationCommand(e):e.type===c.default.executeClientFunction?this._onExecuteClientFunctionCommand(e):e.type===c.default.executeSelector?this._onExecuteSelectorCommand(e):e.type===c.default.navigateTo?this._onNavigateToCommand(e):e.type===c.default.setNativeDialogHandler?this._onSetNativeDialogHandlerCommand(e):e.type===c.default.getNativeDialogHistory?this._onGetNativeDialogHistoryCommand(e):e.type===c.default.getBrowserConsoleMessages?this._onGetBrowserConsoleMessagesCommand(e):e.type===c.default.setTestSpeed?this._onSetTestSpeedCommand(e):e.type===c.default.showAssertionRetriesStatus?this._onShowAssertionRetriesStatusCommand(e):e.type===c.default.hideAssertionRetriesStatus?this._onHideAssertionRetriesStatusCommand(e):e.type===c.default.backupStorages?this._onBackupStoragesCommand():this._onActionCommand(e)},re.prototype._isExecutableInTopWindowOnly=function(e){if((0,d.isExecutableInTopWindowOnly)(e))return!0;var t=this.customCommandHandlers[e.type];return e.forceExecutionInTopWindowOnly||t&&t.isExecutableInTopWindowOnly},re.prototype._onCommand=function(r){var n=this;this.readyPromise.then(function(){var e=(0,d.isCommandRejectableByPageError)(r);if(n.contextStorage.getItem(G)&&e)n._onReady(new g.default({isCommandResult:!0}));else{var t=n.activeChildIframeDriverLink||n.contextStorage.getItem(z);n._isExecutableInTopWindowOnly(r)||!t?n._executeCommand(r):n._runInActiveIframe(r)}})},re.prototype.setCustomCommandHandlers=function(e,t,r){this.customCommandHandlers[e]={isExecutableInTopWindowOnly:r,handler:t}},re.prototype._startInternal=function(e){var t=0<arguments.length&&void 0!==e?e:{finalizePendingCommand:!1};this.role=x.default.master,a.browser.startHeartbeat(this.heartbeatUrl,i.default.createNativeXHR),this._setupAssertionRetryIndication(),this._startCommandsProcessing(t.finalizePendingCommand)},re.prototype._stopInternal=function(){this.role=x.default.replica,a.browser.stopHeartbeat(),A.default.hide()},re.prototype._setupAssertionRetryIndication=function(){var r=this;this.readyPromise.then(function(){r.statusBar.hidePageLoadingStatus();var e=r.contextStorage.getItem(X);if(e){var t=r.contextStorage.getItem(q);0<e-(new Date-t)&&r.statusBar.showWaitingAssertionRetriesStatus(e,t)}})},re.prototype._startCommandsProcessing=function(e){var t=this.contextStorage.getItem(j);if(t&&(t.resent=!0),this.contextStorage.getItem(H))t?this._onTestDone(t):this._checkStatus();else if(!this._failIfClientCodeExecutionIsInterrupted()){e=e||this._hasPendingActionFlags(this.contextStorage);var r=t||new g.default({isCommandResult:e});this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!1),this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this.contextStorage.setItem(this.PENDING_WINDOW_SWITCHING_FLAG,!1),this._onReady(r)}},re.prototype._initParentWindowLink=function(){window.opener&&(this.parentWindowDriverLink=new N.default(window))},re.prototype._getDriverRole=function(){var t=this;return this.windowId?a.browser.getActiveWindowId(this.browserActiveWindowId,i.default.createNativeXHR).then(function(e){return e.activeWindowId===t.windowId?x.default.master:x.default.replica}):W.resolve(x.default.master)},re.prototype._init=function(){this.contextStorage=new E.default(window,this.testRunId,this.windowId),this.nativeDialogsTracker=new m.default(this.contextStorage,this.dialogHandler),this.statusBar=new l.StatusBar(this.userAgent,this.fixtureName,this.testName,this.contextStorage),this.statusBar.on(this.statusBar.UNLOCK_PAGE_BTN_CLICK,a.disableRealEventsPreventing),this.speed=this.initialSpeed},re.prototype.start=function(){var t=this;this._init(),this._getDriverRole().then(function(e){e===x.default.master?t._startInternal():t._initParentWindowLink()})},n(re,[{key:"speed",set:function(e){this.contextStorage.setItem(Y,e)},get:function(){return this.contextStorage.getItem(Y)}},{key:"consoleMessages",get:function(){return new h.default(this.contextStorage.getItem(K))},set:function(e){return this.contextStorage.setItem(K,e?e.getCopy():null)}}]),re);function re(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,re);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,D.call(this));return o.COMMAND_EXECUTING_FLAG="testcafe|driver|command-executing-flag",o.EXECUTING_IN_IFRAME_FLAG="testcafe|driver|executing-in-iframe-flag",o.PENDING_WINDOW_SWITCHING_FLAG="testcafe|driver|pending-window-switching-flag",o.testRunId=e,o.heartbeatUrl=t.heartbeat,o.browserStatusUrl=t.status,o.browserStatusDoneUrl=t.statusDone,o.browserActiveWindowId=t.activeWindowId,o.userAgent=r.userAgent,o.fixtureName=r.fixtureName,o.testName=r.testName,o.selectorTimeout=n.selectorTimeout,o.pageLoadTimeout=n.pageLoadTimeout,o.childWindowReadyTimeout=n.childWindowReadyTimeout,o.initialSpeed=n.speed,o.skipJsErrors=n.skipJsErrors,o.dialogHandler=n.dialogHandler,o.customCommandHandlers={},o.contextStorage=null,o.nativeDialogsTracker=null,o.childIframeDriverLinks=[],o.activeChildIframeDriverLink=null,o.childWindowDriverLinks=[],o.parentWindowDriverLink=null,o.statusBar=null,o.windowId=o._getCurrentWindowId(),o.role=x.default.replica,o.setAsMasterInProgress=!1,o.checkClosedChildWindowIntervalId=null,n.retryTestPages&&a.browser.enableRetryingTestPages(),o.pageInitialRequestBarrier=new a.RequestBarrier,o.readyPromise=a.eventUtils.documentReady(o.pageLoadTimeout).then(function(){return o.pageInitialRequestBarrier.wait(!0)}),o._initChildDriverListening(),a.pageUnloadBarrier.init(),(0,a.preventRealEvents)(),i.default.on(i.default.EVENTS.uncaughtJsError,function(e){return o._onJsError(e)}),i.default.on(i.default.EVENTS.unhandledRejection,function(e){return o._onJsError(e)}),i.default.on(i.default.EVENTS.consoleMethCalled,function(e){return o._onConsoleMessage(e)}),i.default.on(i.default.EVENTS.beforeFormSubmit,function(e){return o._onFormSubmit(e)}),i.default.on(i.default.EVENTS.windowOpened,function(e){return o._onChildWindowOpened(e)}),o.setCustomCommandHandlers(c.default.unlockPage,function(){return o._unlockPageAfterTestIsDone()}),o}e.default=te,t.exports=e.default},"embedding-utils.js":function(e,t,r){e.__esModule=!0;var n,o=r("./command-executors/client-functions/selector-executor/node-snapshots"),i=r("./command-executors/client-functions/selector-executor"),a=(n=i)&&n.__esModule?n:{default:n};e.default={NodeSnapshot:o.NodeSnapshot,ElementSnapshot:o.ElementSnapshot,SelectorExecutor:a.default},t.exports=e.default},"generate-id.js":function(e,t,r){e.__esModule=!0,e.default=function(){return n.nativeMethods.performanceNow().toString()};var n=r("./deps/hammerhead");t.exports=e.default},"iframe-driver.js":function(e,t,r){e.__esModule=!0;var n=r("./deps/hammerhead"),o=r("./deps/testcafe-core"),i=r("./deps/testcafe-ui"),a=f(r("./driver")),s=f(r("./storage")),l=f(r("./status")),u=f(r("./driver-link/iframe/parent")),c=r("./driver-link/messages"),d=f(r("./native-dialog-tracker/iframe"));function f(e){return e&&e.__esModule?e:{default:e}}var h,m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,h=a.default),p.prototype._onJsError=function(){},p.prototype._onConsoleMessage=function(){},p.prototype._initParentDriverListening=function(){var r=this;n.eventSandbox.message.on(n.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;o.pageUnloadBarrier.wait(0).then(function(){if(t.type===c.TYPE.executeCommand){if(r.lastParentDriverMessageId===t.id)return;r.lastParentDriverMessageId=t.id,r.readyPromise.then(function(){r.speed=t.testSpeed,r.parentDriverLink.sendConfirmationMessage(t.id),r._onCommand(t.command)})}t.type===c.TYPE.setNativeDialogHandler&&(r.nativeDialogsTracker.setHandler(t.dialogHandler),r._setNativeDialogHandlerInIframes(t.dialogHandler))})})},p.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e)},p.prototype._onReady=function(e){this.parentDriverLink.onCommandExecuted(e)},p.prototype.start=function(){var t=this;this.nativeDialogsTracker=new d.default(this.dialogHandler),this.statusBar=new i.IframeStatusBar;var e=this.parentDriverLink.establishConnection().then(function(e){t.contextStorage=new s.default(window,e,t.windowId),t._failIfClientCodeExecutionIsInterrupted()||(t.contextStorage.getItem(t.COMMAND_EXECUTING_FLAG)||t.contextStorage.getItem(t.EXECUTING_IN_IFRAME_FLAG))&&(t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!1),t._onReady(new l.default({isCommandResult:!0})))});this.readyPromise=n.Promise.all([this.readyPromise,e])},p);function p(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,h.call(this,e,{},{},t));return r.lastParentDriverMessageId=null,r.parentDriverLink=new u.default(window.parent),r._initParentDriverListening(),r}e.default=m,t.exports=e.default},"index.js":function(e,t,r){var n=u(r("./deps/hammerhead")),o=u(r("./driver")),i=u(r("./iframe-driver")),a=u(r("./script-execution-barrier")),s=u(r("./embedding-utils")),l=u(r("./internal-properties"));function u(e){return e&&e.__esModule?e:{default:e}}var c=n.default.nativeMethods,d=n.default.EVENTS.evalIframeScript;c.objectDefineProperty(window,l.default.testCafeDriver,{configurable:!0,value:o.default}),c.objectDefineProperty(window,l.default.testCafeIframeDriver,{configurable:!0,value:i.default}),c.objectDefineProperty(window,l.default.scriptExecutionBarrier,{configurable:!0,value:a.default}),c.objectDefineProperty(window,l.default.testCafeEmbeddingUtils,{configurable:!0,value:s.default}),n.default.on(d,function(e){return initTestCafeClientDrivers(c.contentWindowGetter.call(e.iframe),!0)})},"internal-properties.js":function(e,t,r){e.__esModule=!0,e.default={testCafeDriver:"%testCafeDriver%",testCafeIframeDriver:"%testCafeIframeDriver%",scriptExecutionBarrier:"%ScriptExecutionBarrier%",testCafeEmbeddingUtils:"%testCafeEmbeddingUtils%",testCafeDriverInstance:"%testCafeDriverInstance%"},t.exports=e.default},"native-dialog-tracker":{"iframe.js":function(e,t,r){e.__esModule=!0;var n=a(r("../deps/hammerhead")),o=a(r("./messages")),i=a(r("./index"));function a(e){return e&&e.__esModule?e:{default:e}}var s,l=n.default.eventSandbox.message,u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=i.default),c.prototype._defaultDialogHandler=function(e){l.sendServiceMsg({type:o.default.unexpectedDialog,dialogType:e,url:i.default._getPageUrl()},window.top)},c.prototype._addAppearedDialogs=function(e,t){l.sendServiceMsg({type:o.default.appearedDialog,dialogType:e,text:t,url:i.default._getPageUrl()},window.top)},c.prototype._onHandlerError=function(e,t){l.sendServiceMsg({type:o.default.handlerError,dialogType:e,message:t,url:i.default._getPageUrl()},window.top)},c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,null,e))}e.default=u,t.exports=e.default},"index.js":function(e,t,r){e.__esModule=!0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=u(r("../deps/hammerhead")),a=r("../../../errors/test-run"),s=u(r("../command-executors/client-functions/client-function-executor")),l=u(r("./messages"));function u(e){return e&&e.__esModule?e:{default:e}}var c=i.default.eventSandbox.message,d=i.default.processScript,f=i.default.nativeMethods,h="testcafe|native-dialog-tracker|appeared-dialogs",m="testcafe|native-dialog-tracker|unexpected-dialog",p="testcafe|native-dialog-tracker|error-in-handler",E=d("window.location.href"),g=(v._getPageUrl=function(){return f.eval(E)},v.prototype._initListening=function(){var r=this;c.on(c.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;t.type===l.default.appearedDialog?r._addAppearedDialogs(t.dialogType,t.text,t.url):t.type!==l.default.unexpectedDialog||r.unexpectedDialog?t.type!==l.default.handlerError||r.handlerError||r._onHandlerError(t.dialogType,t.message,t.url):r.unexpectedDialog={type:t.dialogType,url:t.url}})},v.prototype._init=function(){var t=this;i.default.on(i.default.EVENTS.beforeUnload,function(e){e.prevented&&!e.isFakeIEEvent&&(t.dialogHandler?t._createDialogHandler("beforeunload")(e.returnValue||""):t._defaultDialogHandler("beforeunload")),t.contextStorage&&t.contextStorage.save()}),window.alert=function(){return t._defaultDialogHandler("alert")},window.confirm=function(){return t._defaultDialogHandler("confirm")},window.prompt=function(){return t._defaultDialogHandler("prompt")}},v.prototype._createDialogHandler=function(o){var i=this;return function(e){var t=v._getPageUrl();i._addAppearedDialogs(o,e,t);var r=new s.default(i.dialogHandler),n=null;try{n=r.fn.apply(window,[o,e,t])}catch(e){i._onHandlerError(o,e.message||String(e),t)}return n}},v.prototype._defaultDialogHandler=function(e){var t=v._getPageUrl();this.unexpectedDialog=this.unexpectedDialog||{type:e,url:t}},v.prototype._addAppearedDialogs=function(e,t,r){this.appearedDialogs.splice(0,0,{type:e,text:t,url:r})},v.prototype._onHandlerError=function(e,t,r){this.handlerError=this.handlerError||{type:e,message:t,url:r}},v.prototype.setHandler=function(e){var t=this;this.dialogHandler=e,["alert","confirm","prompt"].forEach(function(e){window[e]=t.dialogHandler?t._createDialogHandler(e):function(){return t._defaultDialogHandler(e)}})},v.prototype.getUnexpectedDialogError=function(){var e=this.unexpectedDialog,t=this.handlerError;return this.unexpectedDialog=null,this.handlerError=null,e?new a.NativeDialogNotHandledError(e.type,e.url):t?new a.UncaughtErrorInNativeDialogHandler(t.type,t.message,t.url):null},n(v,[{key:"appearedDialogs",get:function(){var e=this.contextStorage.getItem(h);return e||(e=[],this.appearedDialogs=e),e},set:function(e){this.contextStorage.setItem(h,e)}},{key:"unexpectedDialog",get:function(){return this.contextStorage.getItem(m)},set:function(e){this.contextStorage.setItem(m,e)}},{key:"handlerError",get:function(){return this.contextStorage.getItem(p)},set:function(e){this.contextStorage.setItem(p,e)}}]),v);function v(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),this.contextStorage=e,this.dialogHandler=t,this._init(),this._initListening(),this.dialogHandler&&this.setHandler(t)}e.default=g,t.exports=e.default},"messages.js":function(e,t,r){e.__esModule=!0,e.default={appearedDialog:"appeared-dialog",unexpectedDialog:"unexpected-dialog",handlerError:"handler-error"},t.exports=e.default}},"role.js":function(e,t,r){e.__esModule=!0,e.default={master:"master",replica:"replica"},t.exports=e.default},"script-execution-barrier.js":function(e,t,r){e.__esModule=!0;var n,o=r("./deps/hammerhead"),i=(n=o)&&n.__esModule?n:{default:n},a=r("./deps/testcafe-core");var s=i.default.Promise,l=i.default.nativeMethods,u=(c.prototype._onScriptElementAdded=function(e){var t=this,r=l.scriptSrcGetter.call(e);if(void 0!==r&&""!==r){function n(){l.removeEventListener.call(e,"load",n),l.removeEventListener.call(e,"error",n),l.clearTimeout.call(window,o),t._onScriptLoadedOrFailed()}this.scriptsCount++;var o=null;l.addEventListener.call(e,"load",n),l.addEventListener.call(e,"error",n),o=l.setTimeout.call(window,n,this.SCRIPT_LOADING_TIMEOUT)}},c.prototype._onScriptLoadedOrFailed=function(){var e=this;this.scriptsCount--,this.scriptsCount||(0,a.delay)(25).then(function(){e.resolveWaitingPromise&&(e.scriptsCount||e.resolveWaitingPromise())})},c.prototype.wait=function(){var r=this;return new s(function(e){function t(){l.clearTimeout.call(window,r.watchdog),i.default.off(i.default.EVENTS.scriptElementAdded,r.scriptElementAddedHandler),r.watchdog=null,r.resolveWaitingPromise=null,e()}r.scriptsCount?(r.watchdog=l.setTimeout.call(window,function(){return t()},r.BARRIER_TIMEOUT),r.resolveWaitingPromise=function(){return t()}):t()})},c);function c(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.watchdog=null,this.SCRIPT_LOADING_TIMEOUT=2e3,this.BARRIER_TIMEOUT=3e3,this.scriptsCount=0,this.resolveWaitingPromise=null,this.scriptElementAddedHandler=function(e){return t._onScriptElementAdded(e.el)},i.default.on(i.default.EVENTS.scriptElementAdded,this.scriptElementAddedHandler)}e.default=u,t.exports=e.default},"status.js":function(e,t,r){e.__esModule=!0;var n=i(r("../../utils/assignable")),o=i(r("./generate-id"));function i(e){return e&&e.__esModule?e:{default:e}}var a,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a=n.default),l.prototype._getAssignableProperties=function(){return[{name:"isCommandResult"},{name:"executionError"},{name:"pageError"},{name:"result"},{name:"consoleMessages"},{name:"isPendingWindowSwitching"}]},l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,a.call(this,e));return t.id=(0,o.default)(),t.isCommandResult=!1,t.executionError=null,t.pageError=null,t.resent=!1,t.result=null,t.consoleMessages=null,t.isPendingWindowSwitching=!1,t._assignFrom(e,!0),t}e.default=s,t.exports=e.default},"storage.js":function(e,t,r){e.__esModule=!0;var n,o=r("./deps/hammerhead"),i=(n=o)&&n.__esModule?n:{default:n};var a=i.default.json,s=i.default.nativeMethods,l=(u.prototype._createStorageKey=function(e,t){var r="testcafe|driver|"+e;return t?r+"|"+t:r},u.prototype._loadFromStorage=function(){var e=this.storage.getItem(this.storageKey);e&&(this.data=a.parse(e),this.storage.removeItem(this.storageKey))},u.prototype.save=function(){this.storage.setItem(this.storageKey,a.stringify(this.data))},u.prototype.setItem=function(e,t){this.data[e]=t,this.save()},u.prototype.getItem=function(e){return this.data[e]},u.prototype.dispose=function(){this.storage.removeItem(this.storageKey)},u);function u(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.storage=s.winSessionStorageGetter.call(e),this.storageKey=this._createStorageKey(t,r),this.data={},this._loadFromStorage()}e.default=l,t.exports=e.default},utils:{"element-utils.js":function(e,t,r){e.__esModule=!0,e.exists=function(e){return!!e},e.visible=function(e){return!(!n.domUtils.isDomElement(e)&&!n.domUtils.isTextNode(e))&&(n.domUtils.isOptionElement(e)||"optgroup"===n.domUtils.getTagName(e)?o.selectElement.isOptionElementVisible(e):n.positionUtils.isElementVisible(e))},e.IsNodeCollection=function(e){return e instanceof s||e instanceof l||function(e){if(!i(e))return!1;for(var t=0;t<e.length;t++)if(!(e[t]instanceof a))return!1;return!0}(e)};var n=r("../deps/testcafe-core"),o=r("../deps/testcafe-ui"),i=Array.isArray,a=window.Node,s=window.HTMLCollection,l=window.NodeList},"ensure-elements.js":function(e,t,r){e.__esModule=!0,e.ensureElements=function(e,t){return new u(e,t).getElements()},e.createElementDescriptor=function(e){return{selector:e,createNotFoundError:function(e){return new l.ActionElementNotFoundError(e)},createIsInvisibleError:function(){return new l.ActionElementIsInvisibleError},createHasWrongNodeTypeError:function(e){return new l.ActionSelectorMatchesWrongNodeTypeError(e)}}},e.createAdditionalElementDescriptor=function(e,t){return{selector:e,createNotFoundError:function(e){return new l.ActionAdditionalElementNotFoundError(t,e)},createIsInvisibleError:function(){return new l.ActionAdditionalElementIsInvisibleError(t)},createHasWrongNodeTypeError:function(e){return new l.ActionAdditionalSelectorMatchesWrongNodeTypeError(t,e)}}};var n,o=r("../deps/hammerhead"),a=r("../deps/testcafe-core"),i=r("../command-executors/client-functions/selector-executor"),s=(n=i)&&n.__esModule?n:{default:n},l=r("../../../errors/test-run");var u=(c.prototype._ensureElement=function(e){var t=this,r=e.selector,n=e.createNotFoundError,o=e.createIsInvisibleError,i=e.createHasWrongNodeTypeError;this.ensureElementsPromise=this.ensureElementsPromise.then(function(){return new s.default(r,t.globalSelectorTimeout,t.ensureElementsStartTime,n,o).getResult()}).then(function(e){if(!a.domUtils.isDomElement(e))throw i(a.NODE_TYPE_DESCRIPTIONS[e.nodeType]);t.elements.push(e)})},c.prototype.getElements=function(){var e=this;return this.ensureElementsPromise.then(function(){return e.elements})},c);function c(e,t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.elements=[],this.globalSelectorTimeout=t,this.ensureElementsPromise=o.Promise.resolve(),this.ensureElementsStartTime=new Date,e.forEach(function(e){return r._ensureElement(e)})}},"run-with-barriers.js":function(e,t,r){e.__esModule=!0,e.default=function(e){var t=new c.RequestBarrier,r=new d.default;c.pageUnloadBarrier.watchForPageNavigationTriggers();for(var n=null,o=arguments.length,i=Array(1<o?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=e.apply(void 0,i),l=s.then(function(e){return n=e,u.Promise.all([t.wait().then(function(){return r.wait()}),c.pageUnloadBarrier.wait()])}).then(function(){return n});return{actionPromise:s,barriersPromise:l}};var n,u=r("../deps/hammerhead"),c=r("../deps/testcafe-core"),o=r("../script-execution-barrier"),d=(n=o)&&n.__esModule?n:{default:n};t.exports=e.default}}}},"client-functions":{selectors:{"snapshot-properties.js":function(e,t,r){e.__esModule=!0;var n=e.NODE_SNAPSHOT_PROPERTIES=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],o=e.ELEMENT_SNAPSHOT_PROPERTIES=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"];e.SNAPSHOT_PROPERTIES=n.concat(o)}}},errors:{"test-run":{"index.js":function(e,t,r){e.__esModule=!0,e.RequestHookNotImplementedMethodError=e.RequestHookUnhandledError=e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CloseChildWindowError=e.CannotSwitchToWindowError=e.ChildWindowIsNotLoadedError=e.ChildWindowNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.ForbiddenCharactersInScreenshotPathError=e.InvalidElementScreenshotDimensionsError=e.WindowDimensionsOverflowError=e.UncaughtTestCafeErrorInCustomScript=e.UncaughtErrorInCustomScript=e.ActionInvalidScrollTargetError=e.ActionElementIsNotFileInputError=e.ActionCannotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionNullableStringArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanArgumentError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionUnawaitedPromiseError=e.AssertionWithoutMethodCallError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtErrorInCustomClientScriptLoadedFromModule=e.UncaughtErrorInCustomClientScriptCode=e.UncaughtExceptionError=e.UnhandledPromiseRejectionError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CannotObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var a=r("../types");function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){l(this,o),this.code=e,this.isTestCafeError=!0,this.callsite=null}var i,u=(n(c,i=o),c);function c(e,t,r){l(this,c);var n=s(this,i.call(this,e));return n.optionName=t,n.actualValue=r,n}var d,f=(n(h,d=o),h);function h(e,t,r){l(this,h);var n=s(this,d.call(this,e));return n.argumentName=t,n.actualValue=r,n}var m;e.MissingAwaitError=(n(p,m=o),p);function p(e){l(this,p);var t=s(this,m.call(this,a.TEST_RUN_ERRORS.missingAwaitError));return t.callsite=e,t}var E;e.ClientFunctionExecutionInterruptionError=(n(g,E=o),g);function g(e){l(this,g);var t=s(this,E.call(this,a.TEST_RUN_ERRORS.clientFunctionExecutionInterruptionError));return t.instantiationCallsiteName=e,t}var v;e.DomNodeClientFunctionResultError=(n(_,v=o),_);function _(e){l(this,_);var t=s(this,v.call(this,a.TEST_RUN_ERRORS.domNodeClientFunctionResultError));return t.instantiationCallsiteName=e,t}var w,y=(n(S,w=o),S);function S(e,t){var r=t.apiFnChain,n=t.apiFnIndex;l(this,S);var o=s(this,w.call(this,e));return o.apiFnChain=r,o.apiFnIndex=n,o}var I;e.InvalidSelectorResultError=(n(C,I=o),C);function C(){return l(this,C),s(this,I.call(this,a.TEST_RUN_ERRORS.invalidSelectorResultError))}var T;e.CannotObtainInfoForElementSpecifiedBySelectorError=(n(R,T=y),R);function R(e,t){l(this,R);var r=s(this,T.call(this,a.TEST_RUN_ERRORS.cannotObtainInfoForElementSpecifiedBySelectorError,t));return r.callsite=e,r}var N;e.PageLoadError=(n(b,N=o),b);function b(e,t){l(this,b);var r=s(this,N.call(this,a.TEST_RUN_ERRORS.pageLoadError));return r.url=t,r.errMsg=e,r}var A;e.UncaughtErrorOnPage=(n(x,A=o),x);function x(e,t){l(this,x);var r=s(this,A.call(this,a.TEST_RUN_ERRORS.uncaughtErrorOnPage));return r.errStack=e,r.pageDestUrl=t,r}var M;e.UncaughtErrorInTestCode=(n(O,M=o),O);function O(e,t){l(this,O);var r=s(this,M.call(this,a.TEST_RUN_ERRORS.uncaughtErrorInTestCode));return r.errMsg=String(e.rawMessage||e),r.callsite=e.callsite||t,r.originError=e,r}var D;e.UncaughtNonErrorObjectInTestCode=(n(P,D=o),P);function P(e){l(this,P);var t=s(this,D.call(this,a.TEST_RUN_ERRORS.uncaughtNonErrorObjectInTestCode));return t.objType=typeof e,t.objStr=String(e),t}var W;e.UncaughtErrorInClientFunctionCode=(n(U,W=o),U);function U(e,t){l(this,U);var r=s(this,W.call(this,a.TEST_RUN_ERRORS.uncaughtErrorInClientFunctionCode));return r.errMsg=String(t),r.instantiationCallsiteName=e,r}var F;e.UncaughtErrorInCustomDOMPropertyCode=(n(k,F=o),k);function k(e,t,r){l(this,k);var n=s(this,F.call(this,a.TEST_RUN_ERRORS.uncaughtErrorInCustomDOMPropertyCode,t,r));return n.errMsg=String(t),n.property=r,n.instantiationCallsiteName=e,n}var L;e.UnhandledPromiseRejectionError=(n(H,L=o),H);function H(e){l(this,H);var t=s(this,L.call(this,a.TEST_RUN_ERRORS.unhandledPromiseRejection));return t.errMsg=String(e),t}var j;e.UncaughtExceptionError=(n(B,j=o),B);function B(e){l(this,B);var t=s(this,j.call(this,a.TEST_RUN_ERRORS.uncaughtException));return t.errMsg=String(e),t}var V;e.UncaughtErrorInCustomClientScriptCode=(n(G,V=o),G);function G(e){l(this,G);var t=s(this,V.call(this,a.TEST_RUN_ERRORS.uncaughtErrorInCustomClientScriptCode));return t.errMsg=String(e),t}var z;e.UncaughtErrorInCustomClientScriptLoadedFromModule=(n(Y,z=o),Y);function Y(e,t){l(this,Y);var r=s(this,z.call(this,a.TEST_RUN_ERRORS.uncaughtErrorInCustomClientScriptCodeLoadedFromModule));return r.errMsg=String(e),r.moduleName=t,r}var X;e.ExternalAssertionLibraryError=(n(q,X=o),q);function q(e,t){l(this,q);var r=s(this,X.call(this,a.TEST_RUN_ERRORS.externalAssertionLibraryError));return r.errMsg=String(e),r.callsite=t,r}var K;e.AssertionExecutableArgumentError=(n(J,K=f),J);function J(e,t,r,n){l(this,J);var o=s(this,K.call(this,a.TEST_RUN_ERRORS.assertionExecutableArgumentError,e,t));return o.errMsg=n?r.rawMessage:r.message,o.originError=r,o}var $;e.AssertionWithoutMethodCallError=(n(Q,$=o),Q);function Q(e){l(this,Q);var t=s(this,$.call(this,a.TEST_RUN_ERRORS.assertionWithoutMethodCallError));return t.callsite=e,t}var Z;e.AssertionUnawaitedPromiseError=(n(ee,Z=o),ee);function ee(e){l(this,ee);var t=s(this,Z.call(this,a.TEST_RUN_ERRORS.assertionUnawaitedPromiseError));return t.callsite=e,t}var te;e.ActionIntegerOptionError=(n(re,te=u),re);function re(e,t){return l(this,re),s(this,te.call(this,a.TEST_RUN_ERRORS.actionIntegerOptionError,e,t))}var ne;e.ActionPositiveIntegerOptionError=(n(oe,ne=u),oe);function oe(e,t){return l(this,oe),s(this,ne.call(this,a.TEST_RUN_ERRORS.actionPositiveIntegerOptionError,e,t))}var ie;e.ActionBooleanOptionError=(n(ae,ie=u),ae);function ae(e,t){return l(this,ae),s(this,ie.call(this,a.TEST_RUN_ERRORS.actionBooleanOptionError,e,t))}var se;e.ActionBooleanArgumentError=(n(le,se=f),le);function le(e,t){return l(this,le),s(this,se.call(this,a.TEST_RUN_ERRORS.actionBooleanArgumentError,e,t))}var ue;e.ActionSpeedOptionError=(n(ce,ue=u),ce);function ce(e,t){return l(this,ce),s(this,ue.call(this,a.TEST_RUN_ERRORS.actionSpeedOptionError,e,t))}var de;e.ActionOptionsTypeError=(n(fe,de=o),fe);function fe(e){l(this,fe);var t=s(this,de.call(this,a.TEST_RUN_ERRORS.actionOptionsTypeError));return t.actualType=e,t}var he;e.ActionStringArgumentError=(n(me,he=f),me);function me(e,t){return l(this,me),s(this,he.call(this,a.TEST_RUN_ERRORS.actionStringArgumentError,e,t))}var pe;e.ActionNullableStringArgumentError=(n(Ee,pe=f),Ee);function Ee(e,t){return l(this,Ee),s(this,pe.call(this,a.TEST_RUN_ERRORS.actionNullableStringArgumentError,e,t))}var ge;e.ActionIntegerArgumentError=(n(ve,ge=f),ve);function ve(e,t){return l(this,ve),s(this,ge.call(this,a.TEST_RUN_ERRORS.actionIntegerArgumentError,e,t))}var _e;e.ActionRoleArgumentError=(n(we,_e=f),we);function we(e,t){return l(this,we),s(this,_e.call(this,a.TEST_RUN_ERRORS.actionRoleArgumentError,e,t))}var ye;e.ActionPositiveIntegerArgumentError=(n(Se,ye=f),Se);function Se(e,t){return l(this,Se),s(this,ye.call(this,a.TEST_RUN_ERRORS.actionPositiveIntegerArgumentError,e,t))}var Ie;e.ActionStringOrStringArrayArgumentError=(n(Ce,Ie=f),Ce);function Ce(e,t){return l(this,Ce),s(this,Ie.call(this,a.TEST_RUN_ERRORS.actionStringOrStringArrayArgumentError,e,t))}var Te;e.ActionStringArrayElementError=(n(Re,Te=f),Re);function Re(e,t,r){l(this,Re);var n=s(this,Te.call(this,a.TEST_RUN_ERRORS.actionStringArrayElementError,e,t));return n.elementIndex=r,n}var Ne;e.SetTestSpeedArgumentError=(n(be,Ne=f),be);function be(e,t){return l(this,be),s(this,Ne.call(this,a.TEST_RUN_ERRORS.setTestSpeedArgumentError,e,t))}var Ae;e.ActionUnsupportedDeviceTypeError=(n(xe,Ae=f),xe);function xe(e,t){return l(this,xe),s(this,Ae.call(this,a.TEST_RUN_ERRORS.actionUnsupportedDeviceTypeError,e,t))}var Me;e.ActionSelectorError=(n(Oe,Me=o),Oe);function Oe(e,t,r){l(this,Oe);var n=s(this,Me.call(this,a.TEST_RUN_ERRORS.actionSelectorError));return n.selectorName=e,n.errMsg=r?t.rawMessage:t.message,n.originError=t,n}var De;e.ActionElementNotFoundError=(n(Pe,De=y),Pe);function Pe(e){return l(this,Pe),s(this,De.call(this,a.TEST_RUN_ERRORS.actionElementNotFoundError,e))}var We;e.ActionElementIsInvisibleError=(n(Ue,We=o),Ue);function Ue(){return l(this,Ue),s(this,We.call(this,a.TEST_RUN_ERRORS.actionElementIsInvisibleError))}var Fe;e.ActionSelectorMatchesWrongNodeTypeError=(n(ke,Fe=o),ke);function ke(e){l(this,ke);var t=s(this,Fe.call(this,a.TEST_RUN_ERRORS.actionSelectorMatchesWrongNodeTypeError));return t.nodeDescription=e,t}var Le;e.ActionAdditionalElementNotFoundError=(n(He,Le=y),He);function He(e,t){l(this,He);var r=s(this,Le.call(this,a.TEST_RUN_ERRORS.actionAdditionalElementNotFoundError,t));return r.argumentName=e,r}var je;e.ActionAdditionalElementIsInvisibleError=(n(Be,je=o),Be);function Be(e){l(this,Be);var t=s(this,je.call(this,a.TEST_RUN_ERRORS.actionAdditionalElementIsInvisibleError));return t.argumentName=e,t}var Ve;e.ActionAdditionalSelectorMatchesWrongNodeTypeError=(n(Ge,Ve=o),Ge);function Ge(e,t){l(this,Ge);var r=s(this,Ve.call(this,a.TEST_RUN_ERRORS.actionAdditionalSelectorMatchesWrongNodeTypeError));return r.argumentName=e,r.nodeDescription=t,r}var ze;e.ActionElementNonEditableError=(n(Ye,ze=o),Ye);function Ye(){return l(this,Ye),s(this,ze.call(this,a.TEST_RUN_ERRORS.actionElementNonEditableError))}var Xe;e.ActionElementNotTextAreaError=(n(qe,Xe=o),qe);function qe(){return l(this,qe),s(this,Xe.call(this,a.TEST_RUN_ERRORS.actionElementNotTextAreaError))}var Ke;e.ActionElementNonContentEditableError=(n(Je,Ke=o),Je);function Je(e){l(this,Je);var t=s(this,Ke.call(this,a.TEST_RUN_ERRORS.actionElementNonContentEditableError));return t.argumentName=e,t}var $e;e.ActionRootContainerNotFoundError=(n(Qe,$e=o),Qe);function Qe(){return l(this,Qe),s(this,$e.call(this,a.TEST_RUN_ERRORS.actionRootContainerNotFoundError))}var Ze;e.ActionIncorrectKeysError=(n(et,Ze=o),et);function et(e){l(this,et);var t=s(this,Ze.call(this,a.TEST_RUN_ERRORS.actionIncorrectKeysError));return t.argumentName=e,t}var tt;e.ActionCannotFindFileToUploadError=(n(rt,tt=o),rt);function rt(e){l(this,rt);var t=s(this,tt.call(this,a.TEST_RUN_ERRORS.actionCannotFindFileToUploadError));return t.filePaths=e,t}var nt;e.ActionElementIsNotFileInputError=(n(ot,nt=o),ot);function ot(){return l(this,ot),s(this,nt.call(this,a.TEST_RUN_ERRORS.actionElementIsNotFileInputError))}var it;e.ActionInvalidScrollTargetError=(n(at,it=o),at);function at(e,t){l(this,at);var r=s(this,it.call(this,a.TEST_RUN_ERRORS.actionInvalidScrollTargetError));return r.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",r}var st;e.UncaughtErrorInCustomScript=(n(lt,st=o),lt);function lt(e,t,r,n,o){l(this,lt);var i=s(this,st.call(this,a.TEST_RUN_ERRORS.uncaughtErrorInCustomScript));return i.callsite=o,i.expression=t,i.line=r,i.column=n,i.originError=e,i.errMsg=e.message||String(e),i}var ut;e.UncaughtTestCafeErrorInCustomScript=(n(ct,ut=o),ct);function ct(e,t,r,n,o){l(this,ct);var i=s(this,ut.call(this,a.TEST_RUN_ERRORS.uncaughtTestCafeErrorInCustomScript));return i.callsite=o,i.expression=t,i.line=r,i.column=n,i.originError=e,i.errCallsite=e.callsite,i}var dt;e.WindowDimensionsOverflowError=(n(ft,dt=o),ft);function ft(e){l(this,ft);var t=s(this,dt.call(this,a.TEST_RUN_ERRORS.windowDimensionsOverflowError));return t.callsite=e,t}var ht;e.InvalidElementScreenshotDimensionsError=(n(mt,ht=o),mt);function mt(e,t){l(this,mt);var r=s(this,ht.call(this,a.TEST_RUN_ERRORS.invalidElementScreenshotDimensionsError));return e<=0?t<=0?(r.verb="are",r.dimensions="width and height"):(r.verb="is",r.dimensions="width"):(r.verb="is",r.dimensions="height"),r}var pt;e.ForbiddenCharactersInScreenshotPathError=(n(Et,pt=o),Et);function Et(e,t){l(this,Et);var r=s(this,pt.call(this,a.TEST_RUN_ERRORS.forbiddenCharactersInScreenshotPathError));return r.screenshotPath=e,r.forbiddenCharsList=t,r}var gt;e.RoleSwitchInRoleInitializerError=(n(vt,gt=o),vt);function vt(e){l(this,vt);var t=s(this,gt.call(this,a.TEST_RUN_ERRORS.roleSwitchInRoleInitializerError));return t.callsite=e,t}var _t;e.ActionElementNotIframeError=(n(wt,_t=o),wt);function wt(){return l(this,wt),s(this,_t.call(this,a.TEST_RUN_ERRORS.actionElementNotIframeError))}var yt;e.ActionIframeIsNotLoadedError=(n(St,yt=o),St);function St(){return l(this,St),s(this,yt.call(this,a.TEST_RUN_ERRORS.actionIframeIsNotLoadedError))}var It;e.CurrentIframeIsNotLoadedError=(n(Ct,It=o),Ct);function Ct(){return l(this,Ct),s(this,It.call(this,a.TEST_RUN_ERRORS.currentIframeIsNotLoadedError))}var Tt;e.ChildWindowNotFoundError=(n(Rt,Tt=o),Rt);function Rt(){return l(this,Rt),s(this,Tt.call(this,a.TEST_RUN_ERRORS.childWindowNotFoundError))}var Nt;e.ChildWindowIsNotLoadedError=(n(bt,Nt=o),bt);function bt(){return l(this,bt),s(this,Nt.call(this,a.TEST_RUN_ERRORS.childWindowIsNotLoadedError))}var At;e.CannotSwitchToWindowError=(n(xt,At=o),xt);function xt(){return l(this,xt),s(this,At.call(this,a.TEST_RUN_ERRORS.cannotSwitchToWindowError))}var Mt;e.CloseChildWindowError=(n(Ot,Mt=o),Ot);function Ot(){return l(this,Ot),s(this,Mt.call(this,a.TEST_RUN_ERRORS.closeChildWindowError))}var Dt;e.CurrentIframeNotFoundError=(n(Pt,Dt=o),Pt);function Pt(){return l(this,Pt),s(this,Dt.call(this,a.TEST_RUN_ERRORS.currentIframeNotFoundError))}var Wt;e.CurrentIframeIsInvisibleError=(n(Ut,Wt=o),Ut);function Ut(){return l(this,Ut),s(this,Wt.call(this,a.TEST_RUN_ERRORS.currentIframeIsInvisibleError))}var Ft;e.NativeDialogNotHandledError=(n(kt,Ft=o),kt);function kt(e,t){l(this,kt);var r=s(this,Ft.call(this,a.TEST_RUN_ERRORS.nativeDialogNotHandledError));return r.dialogType=e,r.pageUrl=t,r}var Lt;e.UncaughtErrorInNativeDialogHandler=(n(Ht,Lt=o),Ht);function Ht(e,t,r){l(this,Ht);var n=s(this,Lt.call(this,a.TEST_RUN_ERRORS.uncaughtErrorInNativeDialogHandler));return n.dialogType=e,n.errMsg=t,n.pageUrl=r,n}var jt;e.SetNativeDialogHandlerCodeWrongTypeError=(n(Bt,jt=o),Bt);function Bt(e){l(this,Bt);var t=s(this,jt.call(this,a.TEST_RUN_ERRORS.setNativeDialogHandlerCodeWrongTypeError));return t.actualType=e,t}var Vt;e.RequestHookUnhandledError=(n(Gt,Vt=o),Gt);function Gt(e,t,r){l(this,Gt);var n=s(this,Vt.call(this,a.TEST_RUN_ERRORS.requestHookUnhandledError));return n.errMsg=String(e),n.hookClassName=t,n.methodName=r,n}var zt;e.RequestHookNotImplementedMethodError=(n(Yt,zt=o),Yt);function Yt(e,t){l(this,Yt);var r=s(this,zt.call(this,a.TEST_RUN_ERRORS.requestHookNotImplementedError));return r.methodName=e,r.hookClassName=t,r}}},"types.js":function(e,t,r){e.__esModule=!0;e.TEST_RUN_ERRORS={uncaughtErrorOnPage:"E1",uncaughtErrorInTestCode:"E2",uncaughtNonErrorObjectInTestCode:"E3",uncaughtErrorInClientFunctionCode:"E4",uncaughtErrorInCustomDOMPropertyCode:"E5",unhandledPromiseRejection:"E6",uncaughtException:"E7",missingAwaitError:"E8",actionIntegerOptionError:"E9",actionPositiveIntegerOptionError:"E10",actionBooleanOptionError:"E11",actionSpeedOptionError:"E12",actionOptionsTypeError:"E14",actionBooleanArgumentError:"E15",actionStringArgumentError:"E16",actionNullableStringArgumentError:"E17",actionStringOrStringArrayArgumentError:"E18",actionStringArrayElementError:"E19",actionIntegerArgumentError:"E20",actionRoleArgumentError:"E21",actionPositiveIntegerArgumentError:"E22",actionSelectorError:"E23",actionElementNotFoundError:"E24",actionElementIsInvisibleError:"E26",actionSelectorMatchesWrongNodeTypeError:"E27",actionAdditionalElementNotFoundError:"E28",actionAdditionalElementIsInvisibleError:"E29",actionAdditionalSelectorMatchesWrongNodeTypeError:"E30",actionElementNonEditableError:"E31",actionElementNotTextAreaError:"E32",actionElementNonContentEditableError:"E33",actionElementIsNotFileInputError:"E34",actionRootContainerNotFoundError:"E35",actionIncorrectKeysError:"E36",actionCannotFindFileToUploadError:"E37",actionUnsupportedDeviceTypeError:"E38",actionIframeIsNotLoadedError:"E39",actionElementNotIframeError:"E40",actionInvalidScrollTargetError:"E41",currentIframeIsNotLoadedError:"E42",currentIframeNotFoundError:"E43",currentIframeIsInvisibleError:"E44",nativeDialogNotHandledError:"E45",uncaughtErrorInNativeDialogHandler:"E46",setTestSpeedArgumentError:"E47",setNativeDialogHandlerCodeWrongTypeError:"E48",clientFunctionExecutionInterruptionError:"E49",domNodeClientFunctionResultError:"E50",invalidSelectorResultError:"E51",cannotObtainInfoForElementSpecifiedBySelectorError:"E52",externalAssertionLibraryError:"E53",pageLoadError:"E54",windowDimensionsOverflowError:"E55",forbiddenCharactersInScreenshotPathError:"E56",invalidElementScreenshotDimensionsError:"E57",roleSwitchInRoleInitializerError:"E58",assertionExecutableArgumentError:"E59",assertionWithoutMethodCallError:"E60",assertionUnawaitedPromiseError:"E61",requestHookNotImplementedError:"E62",requestHookUnhandledError:"E63",uncaughtErrorInCustomClientScriptCode:"E64",uncaughtErrorInCustomClientScriptCodeLoadedFromModule:"E65",uncaughtErrorInCustomScript:"E66",uncaughtTestCafeErrorInCustomScript:"E67",childWindowIsNotLoadedError:"E68",childWindowNotFoundError:"E69",cannotSwitchToWindowError:"E70",closeChildWindowError:"E71"},e.RUNTIME_ERRORS={cannotCreateMultipleLiveModeRunners:"E1000",cannotRunLiveModeRunnerMultipleTimes:"E1001",browserDisconnected:"E1002",cannotRunAgainstDisconnectedBrowsers:"E1003",cannotEstablishBrowserConnection:"E1004",cannotFindBrowser:"E1005",browserProviderNotFound:"E1006",browserNotSet:"E1007",testFilesNotFound:"E1008",noTestsToRun:"E1009",cannotFindReporterForAlias:"E1010",multipleStdoutReporters:"E1011",optionValueIsNotValidRegExp:"E1012",optionValueIsNotValidKeyValue:"E1013",invalidSpeedValue:"E1014",invalidConcurrencyFactor:"E1015",cannotDivideRemotesCountByConcurrency:"E1016",portsOptionRequiresTwoNumbers:"E1017",portIsNotFree:"E1018",invalidHostname:"E1019",cannotFindSpecifiedTestSource:"E1020",clientFunctionCodeIsNotAFunction:"E1021",selectorInitializedWithWrongType:"E1022",clientFunctionCannotResolveTestRun:"E1023",regeneratorInClientFunctionCode:"E1024",invalidClientFunctionTestRunBinding:"E1025",invalidValueType:"E1026",unsupportedUrlProtocol:"E1027",testControllerProxyCannotResolveTestRun:"E1028",timeLimitedPromiseTimeoutExpired:"E1029",cannotSetVideoOptionsWithoutBaseVideoPathSpecified:"E1031",multipleAPIMethodCallForbidden:"E1032",invalidReporterOutput:"E1033",cannotReadSSLCertFile:"E1034",cannotPrepareTestsDueToError:"E1035",cannotParseRawFile:"E1036",testedAppFailedWithError:"E1037",unableToOpenBrowser:"E1038",requestHookConfigureAPIError:"E1039",forbiddenCharatersInScreenshotPath:"E1040",cannotFindFFMPEG:"E1041",compositeArgumentsError:"E1042",cannotFindTypescriptConfigurationFile:"E1043",clientScriptInitializerIsNotSpecified:"E1044",clientScriptBasePathIsNotSpecified:"E1045",clientScriptInitializerMultipleContentSources:"E1046",cannotLoadClientScriptFromPath:"E1047",clientScriptModuleEntryPointPathCalculationError:"E1048",methodIsNotAvailableForAnIPCHost:"E1049",tooLargeIPCPayload:"E1050",malformedIPCMessage:"E1051",unexpectedIPCHeadPacket:"E1052",unexpectedIPCBodyPacket:"E1053",unexpectedIPCTailPacket:"E1054",cannotUseAllowMultipleWindowsOptionForLegacyTests:"E1055",cannotUseAllowMultipleWindowsOptionForSomeBrowsers:"E1056"}}},"test-run":{"browser-console-messages.js":function(e,t,r){e.__esModule=!0;var n=(o.prototype._ensureWindowIdMessageContainer=function(e){this[e]||(this[e]={log:[],info:[],warn:[],error:[]})},o.prototype.concat=function(t){var r=this;return t&&Object.keys(t).forEach(function(e){r._ensureWindowIdMessageContainer(e),r[e].log=r[e].log.concat(t[e].log),r[e].info=r[e].info.concat(t[e].info),r[e].warn=r[e].warn.concat(t[e].warn),r[e].error=r[e].error.concat(t[e].error)}),this},o.prototype.addMessage=function(e,t,r){this._ensureWindowIdMessageContainer(r),this[r][e].push(t)},o.prototype.getCopy=function(){var t=this,r={};return Object.keys(this).forEach(function(e){r[e]={log:t[e].log.slice(),info:t[e].info.slice(),warn:t[e].warn.slice(),error:t[e].error.slice()}}),r},o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.concat(e)}e.default=n,t.exports=e.default},"client-messages.js":function(e,t,r){e.__esModule=!0,e.default={ready:"ready",readyForBrowserManipulation:"ready-for-browser-manipulation",waitForFileDownload:"wait-for-file-download"},t.exports=e.default},commands:{"options.js":function(e,t,r){e.__esModule=!0,e.AssertionOptions=e.ResizeToFitDeviceOptions=e.DragToElementOptions=e.TypeOptions=e.MoveOptions=e.ClickOptions=e.MouseOptions=e.ElementScreenshotOptions=e.ScrollOptions=e.OffsetOptions=e.ActionOptions=e.speedOption=e.booleanOption=e.positiveIntegerOption=e.integerOption=void 0;var n,o=r("../../utils/assignable"),i=(n=o)&&n.__esModule?n:{default:n},a=r("./validations/factories"),s=r("../../errors/test-run");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d,f=e.integerOption=(0,a.createIntegerValidator)(s.ActionIntegerOptionError),h=e.positiveIntegerOption=(0,a.createPositiveIntegerValidator)(s.ActionPositiveIntegerOptionError),m=e.booleanOption=(0,a.createBooleanValidator)(s.ActionBooleanOptionError),p=e.speedOption=(0,a.createSpeedValidator)(s.ActionSpeedOptionError),E=e.ActionOptions=(c(g,d=i.default),g.prototype._getAssignableProperties=function(){return[{name:"speed",type:p}]},g);function g(e,t){l(this,g);var r=u(this,d.call(this));return r.speed=null,r._assignFrom(e,t),r}var v,_=e.OffsetOptions=(c(w,v=E),w.prototype._getAssignableProperties=function(){return v.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:f},{name:"offsetY",type:f}])},w);function w(e,t){l(this,w);var r=u(this,v.call(this));return r.offsetX=null,r.offsetY=null,r._assignFrom(e,t),r}var y;e.ScrollOptions=(c(S,y=_),S.prototype._getAssignableProperties=function(){return y.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:m},{name:"skipParentFrames",type:m}])},S);function S(e,t){l(this,S);var r=u(this,y.call(this));return r.scrollToCenter=!1,r.skipParentFrames=!1,r._assignFrom(e,t),r}var I;e.ElementScreenshotOptions=(c(C,I=E),C.prototype._getAssignableProperties=function(){return I.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:f},{name:"scrollTargetY",type:f},{name:"crop.left",type:f},{name:"crop.right",type:f},{name:"crop.top",type:f},{name:"crop.bottom",type:f},{name:"includeMargins",type:m},{name:"includeBorders",type:m},{name:"includePaddings",type:m}])},C);function C(e,t){l(this,C);var r=u(this,I.call(this));return r.scrollTargetX=null,r.scrollTargetY=null,r.includeMargins=!1,r.includeBorders=!0,r.includePaddings=!0,r.crop={left:null,right:null,top:null,bottom:null},r._assignFrom(e,t),r}var T,R=e.MouseOptions=(c(N,T=_),N.prototype._getAssignableProperties=function(){return T.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:m},{name:"modifiers.alt",type:m},{name:"modifiers.shift",type:m},{name:"modifiers.meta",type:m}])},N);function N(e,t){l(this,N);var r=u(this,T.call(this));return r.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},r._assignFrom(e,t),r}var b,A=e.ClickOptions=(c(x,b=R),x.prototype._getAssignableProperties=function(){return b.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:h}])},x);function x(e,t){l(this,x);var r=u(this,b.call(this));return r.caretPos=null,r._assignFrom(e,t),r}var M;e.MoveOptions=(c(O,M=R),O.prototype._getAssignableProperties=function(){return M.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:m},{name:"skipDefaultDragBehavior",type:m}])},O);function O(e,t){l(this,O);var r=u(this,M.call(this));return r.speed=null,r.minMovingTime=null,r.holdLeftButton=!1,r.skipScrolling=!1,r.skipDefaultDragBehavior=!1,r._assignFrom(e,t),r}var D;e.TypeOptions=(c(P,D=A),P.prototype._getAssignableProperties=function(){return D.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:m},{name:"paste",type:m}])},P);function P(e,t){l(this,P);var r=u(this,D.call(this));return r.replace=!1,r.paste=!1,r._assignFrom(e,t),r}var W;e.DragToElementOptions=(c(U,W=R),U.prototype._getAssignableProperties=function(){return W.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:f},{name:"destinationOffsetY",type:f}])},U);function U(e,t){l(this,U);var r=u(this,W.call(this,e,t));return r.destinationOffsetX=null,r.destinationOffsetY=null,r._assignFrom(e,t),r}var F;e.ResizeToFitDeviceOptions=(c(k,F=i.default),k.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:m}]},k);function k(e,t){l(this,k);var r=u(this,F.call(this));return r.portraitOrientation=!1,r._assignFrom(e,t),r}var L;e.AssertionOptions=(c(H,L=i.default),H.prototype._getAssignableProperties=function(){return[{name:"timeout",type:h},{name:"allowUnawaitedPromise",type:m}]},H);function H(e,t){l(this,H);var r=u(this,L.call(this));return r.timeout=void 0,r.allowUnawaitedPromise=!1,r._assignFrom(e,t),r}},"type.js":function(e,t,r){e.__esModule=!0,e.default={click:"click",rightClick:"right-click",doubleClick:"double-click",drag:"drag",dragToElement:"drag-to-element",hover:"hover",typeText:"type-text",selectText:"select-text",selectTextAreaContent:"select-text-area-content",selectEditableContent:"select-editable-content",pressKey:"press-key",wait:"wait",navigateTo:"navigate-to",setFilesToUpload:"set-files-to-upload",clearUpload:"clear-upload",executeClientFunction:"execute-client-function",executeSelector:"execute-selector",takeScreenshot:"take-screenshot",takeElementScreenshot:"take-element-screenshot",takeScreenshotOnFail:"take-screenshot-on-fail",prepareBrowserManipulation:"prepare-browser-manipulation",showAssertionRetriesStatus:"show-assertion-retries-status",hideAssertionRetriesStatus:"hide-assertion-retries-status",setBreakpoint:"set-breakpoint",resizeWindow:"resize-window",resizeWindowToFitDevice:"resize-window-to-fit-device",maximizeWindow:"maximize-window",switchToIframe:"switch-to-iframe",switchToMainWindow:"switch-to-main-window",setNativeDialogHandler:"set-native-dialog-handler",getNativeDialogHistory:"get-native-dialog-history",getBrowserConsoleMessages:"get-browser-console-messages",setTestSpeed:"set-test-speed",setPageLoadTimeout:"set-page-load-timeout",debug:"debug",assertion:"assertion",useRole:"useRole",testDone:"test-done",backupStorages:"backup-storages",executeExpression:"execute-expression",executeAsyncExpression:"execute-async-expression",unlockPage:"unlock-page",recorder:"recorder"},t.exports=e.default},"utils.js":function(e,t,r){e.__esModule=!0,e.isCommandRejectableByPageError=function(e){return!function(e){return s(e)||e.type===i.default.wait||e.type===i.default.assertion||e.type===i.default.executeExpression}(e)&&!c(e)&&!d(e)||u(e)&&!function(e){return e.type===i.default.switchToIframe||e.type===i.default.switchToMainWindow}(e)},e.canSetDebuggerBreakpointBeforeCommand=function(e){return e.type!==i.default.debug&&!s(e)&&!d(e)},e.isScreenshotCommand=l,e.isResizeWindowCommand=u,e.isBrowserManipulationCommand=c,e.isServiceCommand=d,e.isExecutableInTopWindowOnly=function(e){return e.type===i.default.testDone||e.type===i.default.switchToMainWindow||e.type===i.default.setNativeDialogHandler||e.type===i.default.getNativeDialogHistory||e.type===i.default.setTestSpeed||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||c(e)&&e.type!==i.default.takeElementScreenshot},e.isJSExpression=function(e){return null!==e&&"object"==typeof e&&e.type===a&&"string"==typeof e.value},e.isExecutableOnClientCommand=function(e){return e.type!==i.default.wait&&e.type!==i.default.setPageLoadTimeout&&e.type!==i.default.debug&&e.type!==i.default.useRole&&e.type!==i.default.assertion&&e.type!==i.default.executeExpression&&e.type!==i.default.executeAsyncExpression};var n,o=r("./type"),i=(n=o)&&n.__esModule?n:{default:n};var a="js-expr";function s(e){return e.type===i.default.executeClientFunction||e.type===i.default.executeSelector}function l(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail}function u(e){return e.type===i.default.resizeWindow||e.type===i.default.resizeWindowToFitDevice||e.type===i.default.maximizeWindow}function c(e){return l(e)||u(e)}function d(e){return e.type===i.default.testDone||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||e.type===i.default.takeScreenshotOnFail||e.type===i.default.recorder}},validations:{"factories.js":function(e,t,r){function o(n){return function(e,t){var r=typeof t;if("number"!=r)throw new n(e,r);if(!(!isNaN(t)&&isFinite(t)&&t===Math.floor(t)))throw new n(e,t)}}e.__esModule=!0,e.createIntegerValidator=o,e.createPositiveIntegerValidator=function(r){var n=o(r);return function(e,t){if(n(e,t),t<0)throw new r(e,t)}},e.createBooleanValidator=function(n){return function(e,t){var r=typeof t;if("boolean"!=r)throw new n(e,r)}},e.createSpeedValidator=function(n){return function(e,t){var r=typeof t;if("number"!=r)throw new n(e,r);if(isNaN(t)||t<.01||1<t)throw new n(e,t)}}}}}},utils:{"assignable.js":function(e,t,r){e.__esModule=!0;var n=(o.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},o.prototype._assignFrom=function(e,t,r){var n=2<arguments.length&&void 0!==r?r:{};if(e)for(var o=this._getAssignableProperties(),i=0;i<o.length;i++){for(var a=o[i],s=a.name,l=a.type,u=a.required,c=a.init,d=a.defaultValue,f=s.split("."),h=f.length-1,m=f[h],p=e,E=this,g=0;g<h&&p&&E;g++)p=p[f[g]],E=E[f[g]];if(E&&"defaultValue"in o[i]&&(E[s]=d),p&&E){var v=p[m];void 0===v&&!u||(t&&l&&l(s,v),E[m]=c?c(s,v,n):v)}}},o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}e.default=n,t.exports=e.default},"browser-connection-timeouts.js":function(e,t,r){e.__esModule=!0;var n=e.HEARTBEAT_TIMEOUT=12e4,o=(e.BROWSER_RESTART_TIMEOUT=6e4,e.HEARTBEAT_INTERVAL=2e3,e.CHECK_IFRAME_DRIVER_LINK_DELAY=500,e.CHECK_CHILD_WINDOW_DRIVER_LINK_DELAY=500,e.SEND_STATUS_REQUEST_TIME_LIMIT=5e3,e.SEND_STATUS_REQUEST_RETRY_DELAY=300);e.SEND_STATUS_REQUEST_RETRY_COUNT=Math.floor(n/o-1),e.CHECK_STATUS_RETRY_DELAY=1e3},"limit-number.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r){return Math.min(Math.max(t,e),r)},t.exports=e.default}}}}})("testcafe-release/src/client/driver/index")}initTestCafeClientDrivers(window)}();